@ck_slave_law_cooldown_years = 10

ck_slavery_law = {
	default = ck_slavery_law_1

	cumulative = no
	flag = CK_REALM_LAWS

	ck_slavery_law_0 = {
		pass_phrase = ck_slavery_law_0_pass_phrase
		confirmation_title = ck_slavery_law_0_pass_phrase
		confirmation_button_text = ck_slavery_law_confirmation_button_text
		modifier = {}
		flag = ck_no_slavery_flag
		
		can_keep = {
			is_independent_ruler = yes
		}

		can_pass = {
			trigger_if = {
				limit = {
					is_independent_ruler = yes
				}
				custom_tooltip = {
					text = ck_slavery_law_cooldown_desc
					NOT = { has_variable = ck_slave_law_cooldown }
				}
			}
		}
		pass_cost = {
			prestige = 150
		}
		on_pass = {
			set_variable = {
				name = ck_slave_law_cooldown
				years = @ck_slave_law_cooldown_years
			}
		}
	}

	ck_slavery_law_1 = {
		pass_phrase = ck_slavery_law_1_pass_phrase
		confirmation_title = ck_slavery_law_1_pass_phrase
		confirmation_button_text = ck_slavery_law_confirmation_button_text
		modifier = {
			minority_opinion = -5
		}
		flag = ck_full_slavery_flag
		flag = government_can_raid_rule
		
		can_keep = {
			is_independent_ruler = yes
		}

		can_pass = {
			trigger_if = {
				limit = {
					is_independent_ruler = yes
				}
				custom_tooltip = {
					text = ck_slavery_law_cooldown_desc
					NOT = { has_variable = ck_slave_law_cooldown }
				}
			}
			trigger_if = {
				limit = {
					is_independent_ruler = yes
					NOR = {
						capital_province = {
							geographical_region = region_geroia
						}
						culture = {
							has_cultural_pillar = heritage_geroian
						}
					}
				}
				custom_tooltip = {
					text = ck_slavery_geroian_desc_NOT
					# always = no
				}
			}
		}
		pass_cost = {
			# prestige = 200
		}
		on_pass = {
			set_variable = {
				name = ck_slave_law_cooldown
				years = @ck_slave_law_cooldown_years
			}
		}
	}

	ck_slavery_law_2 = {
		pass_phrase = ck_slavery_law_2_pass_phrase
		confirmation_title = ck_slavery_law_2_pass_phrase
		confirmation_button_text = ck_slavery_law_confirmation_button_text
		modifier = {}
		flag = ck_full_slavery_flag
		flag = government_can_raid_rule
		
		can_keep = {
			custom_tooltip = {
				text = ck_slavery_geroian_desc
				OR = {
					capital_province = {
						geographical_region = region_geroia
					}
					culture = {
						has_cultural_pillar = heritage_geroian
					}
				}
			}
			is_independent_ruler = yes
		}

		can_pass = {
			trigger_if = {
				limit = {
					is_independent_ruler = yes
				}
				custom_tooltip = {
					text = ck_slavery_law_cooldown_desc
					NOT = { has_variable = ck_slave_law_cooldown }
				}
			}
			# trigger_if = {
			# 	limit = {
			# 		is_independent_ruler = yes
			# 	}
			# 	custom_tooltip = {
			# 		text = ck_slavery_geroian_desc
			# 		OR = {
			# 			capital_province = {
			# 				geographical_region = region_geroia
			# 			}
			# 			culture = {
			# 				has_cultural_pillar = heritage_geroian
			# 			}
			# 		}
			# 	}
			# }
		}
		pass_cost = {
			prestige = 250
		}
		on_pass = {
			set_variable = {
				name = ck_slave_law_cooldown
				years = @ck_slave_law_cooldown_years
			}
		}
	}

}

ck_religious_tolerance = { # Independent of Faith / Cultural statuses but cannot downgrade them
	default = ck_religious_tolerance_1

	cumulative = no
	flag = CK_REALM_LAWS

	ck_religious_tolerance_0 = { # Persecuted - cannot have special tolerance tenets / non-faith vassals get free revocation against them
		pass_phrase = ck_religious_tolerance_0_pass_phrase
		confirmation_title = ck_religious_tolerance_0_pass_phrase
		confirmation_button_text = ck_religious_tolerance_confirmation_button_text
		flag = persecuted_tolerance
		should_start_with = {
			faith = {
				OR = {
					has_doctrine = doctrine_pluralism_fundamentalist
					NOT = {
						has_doctrine = doctrine_pluralism_pluralistic
					}
				}
				NOT = {
					ck_syncretic_faiths_trigger = yes
				}
			}
		}
		can_keep = {
			highest_held_title_tier >= tier_duchy
			trigger_if = {
				limit = {
					faith = {
						NOT = {
							ck_syncretic_faiths_trigger = yes
						}
					}
				}
				custom_tooltip = {
					text = "ck_religious_tolerance_0_5"
				}
			}
			is_independent_ruler = yes
		}
		can_pass = {
		}
		on_pass = {
			if = {
				limit = {
					faith = {
						has_doctrine = doctrine_pluralism_pluralistic
					}
				}
				custom_tooltip = "ck_religious_tolerance_1_pluralistic"
				custom_tooltip = "ck_religious_tolerance_0_pluralistic_tt"
			}
			else = {
				custom_tooltip = {
					text = "revocation_causes_ck"
					always = no
				}
			}
			custom_tooltip = {
				text = "ck_religious_tolerance_0_tt"
				every_vassal_or_below = {
					limit = {
						NOT = {
							faith = liege.faith
						}
					}
					add_opinion = {
						target = liege
						modifier = ck_religious_tolerance_0_opinion
					}
				}
			}
			if = {
				limit = {
					any_vassal_or_below = {
						AND = {
							has_trait = compassionate
							AND = {
								faith = liege.faith
								faith = {
									NOT = {
										has_doctrine = doctrine_pluralism_pluralistic
									}
								}
							}
						}
					}
				}
				custom_tooltip = {
					text = "ck_religious_tolerance_0_compassionate"
					every_vassal_or_below = {
						limit = {
							AND = {
								has_trait = compassionate
								AND = {
									faith = liege.faith
									faith = {
										NOT = {
											has_doctrine = doctrine_pluralism_pluralistic
										}
									}
								}
							}
						}
						add_opinion = {
							target = liege
							modifier = ck_religious_tolerance_0_pluralistic
						}
					}
				}
			}
			if = {
				limit = {
					any_vassal_or_below = {
						AND = {
							NOT = {
								has_vassal_stance = zealot
							}
							faith = liege.faith
							faith = {
								has_doctrine = doctrine_pluralism_pluralistic
							}
						}
					}
				}
				custom_tooltip = {
					text = "ck_religious_tolerance_0_pluralistic_tt_2"
					every_vassal_or_below = {
						limit = {
							AND = {
								NOT = {
									has_vassal_stance = zealot
								}
								faith = liege.faith
								faith = {
									has_doctrine = doctrine_pluralism_pluralistic
								}
							}
						}
						add_opinion = {
							target = liege
							modifier = ck_religious_tolerance_3_opinion_fundamentalist
						}
					}
				}
			}
		}
		pass_cost = {
			piety = {
				value = 300
				if = {
					limit = {
						faith = {
							has_doctrine = doctrine_pluralism_pluralistic
						}
					}
					multiply = {
						desc = "ck_tolerance_3_desc"
						value = 1.5
					}
				}
				if = {
					limit = {
						faith = {
							has_doctrine = doctrine_pluralism_fundamentalist
						}
					}
					multiply = {
						desc = "ck_tolerance_3_desc_2"
						value = 0.5
					}
				}
				if = {
					limit = {
						faith = {
							has_doctrine = doctrine_pluralism_righteous
						}
					}
					multiply = {
						desc = "ck_tolerance_3_desc_3"
						value = 0.75
					}
				}
			}
		}
		modifier = {
			minority_different_faith_opinion = -30
			zealot_same_faith_opinion = 20
			domain_tax_different_faith_mult = 0.15
			levy_reinforcement_rate_same_faith = 0.25
			levy_reinforcement_rate_different_faith = -0.25
		}
	}

	## Decommissioned this law. No sense in it for right now to be honest.
	# ck_religious_tolerance_1 = { # Tax / Non-Believers pay taxes / Unlocks Jizya tax w/o tenet
	# 	pass_phrase = ck_religious_tolerance_1_pass_phrase
	# 	confirmation_title = ck_religious_tolerance_1_pass_phrase
	# 	confirmation_button_text = ck_religious_tolerance_confirmation_button_text
	# 	flag = can_tax_other_faiths_ck
	# 	can_keep = {
	# 		highest_held_title_tier >= tier_duchy
	# 		trigger_if = {
	# 			limit = {
	# 				faith = {
	# 					NOR = {
	# 						has_doctrine_parameter = unlock_jizya_contract
	# 						has_doctrine = tenet_tax_nonbelievers
	# 					}
	# 				}
	# 			}
	# 			custom_tooltip = {
	# 				text = cannot_have_jizya_doctrine
	# 			}
	# 		}
	# 		trigger_if = {
	# 			limit = {
	# 				is_independent_ruler = no
	# 				liege = {
	# 					NOR = {
	# 						has_realm_law_flag = full_religious_tolerance
	# 						has_realm_law_flag = persecuted_tolerance
	# 					}
	# 				}
	# 			}
	# 			custom_tooltip = {
	# 				text = ruler_already_passed_persecuted_tolerance
	# 				# always = no
	# 			}
	# 		}
	# 	}
	# 	can_pass = {

	# 	}
	# 	on_pass = {
	# 		if = {
	# 			limit = {
	# 				faith = {
	# 					has_doctrine = doctrine_pluralism_pluralistic
	# 				}
	# 			}
	# 			custom_tooltip = "ck_religious_tolerance_1_pluralistic"
	# 		}
	# 		custom_tooltip = {
	# 			text = "ck_religious_tolerance_1_compassionate"
	# 			every_vassal_or_below = {
	# 				if = {
	# 					limit = {
	# 						AND = {
	# 							faith = liege.faith
	# 							OR = {
	# 								has_trait = compassionate
	# 								has_trait = generous
	# 							}
	# 						}
	# 					}
	# 					add_opinion = {
	# 						target = liege
	# 						modifier = ck_religious_tolerance_1_pluralistic_opinion
	# 					}
	# 				}
	# 			}
	# 		}
	# 	}
	# 	pass_cost = {
	# 		piety = {
	# 			value = 250
	# 			if = {
	# 				limit = {
	# 					faith = {
	# 						has_doctrine = doctrine_pluralism_pluralistic
	# 					}
	# 				}
	# 				multiply = {
	# 					desc = "ck_tolerance_3_desc"
	# 					value = 1.5
	# 				}
	# 			}
	# 			if = {
	# 				limit = {
	# 					faith = {
	# 						has_doctrine = doctrine_pluralism_fundamentalist
	# 					}
	# 				}
	# 				multiply = {
	# 					desc = "ck_tolerance_3_desc_2"
	# 					value = 0.75
	# 				}
	# 			}
	# 		}
	# 	}
	# 	modifier = {
	# 		minority_different_faith_opinion = -10
	# 		zealot_same_faith_opinion = 10
	# 		domain_tax_different_faith_mult = -0.2
	# 		levy_reinforcement_rate_same_faith = 0.25
	# 		levy_reinforcement_rate_different_faith = -0.25
	# 	}
	# }

	ck_religious_tolerance_2 = { # Tolerated - Step below full rights. Cannot hold positions of office or be given titles
		pass_phrase = ck_religious_tolerance_2_pass_phrase
		confirmation_title = ck_religious_tolerance_2_pass_phrase
		confirmation_button_text = ck_religious_tolerance_confirmation_button_text
		flag = normal_religious_tolerance
		should_start_with = {
			faith = {
				NOT = {
					has_doctrine = doctrine_pluralism_fundamentalist
				}
			}
		}
		can_keep = {
			highest_held_title_tier >= tier_duchy
			is_independent_ruler = yes
		}
		on_pass = {
			every_vassal = {
				limit = {
					AND = {
						has_vassal_stance = zealot
						faith = liege.faith
						faith = {
							NOT = {
								has_doctrine = doctrine_pluralism_pluralistic
							}
						}
					}
				}
				add_opinion = {
					target = liege
					modifier = ck_religious_tolerance_2_opinion
				}
			}
			hidden_effect = {
				remove_jizya_tax_law = yes
			}
		}
		pass_cost = {
			piety = {
				value = 200
				if = {
					limit = {
						faith = {
							has_doctrine = doctrine_pluralism_pluralistic
						}
					}
					multiply = {
						desc = "ck_tolerance_3_desc"
						value = 0.75
					}
				}
				if = {
					limit = {
						faith = {
							has_doctrine = doctrine_pluralism_fundamentalist
						}
					}
					multiply = {
						desc = "ck_tolerance_3_desc_2"
						value = 1.25
					}
				}
				if = {
					limit = {
						faith = {
							has_doctrine = doctrine_pluralism_righteous
						}
					}
					multiply = {
						desc = "ck_tolerance_3_desc_3"
						value = 1.15
					}
				}
			}
		}
		modifier = {
			minority_different_faith_opinion = 5
			zealot_same_faith_opinion = -5
			domain_tax_different_faith_mult = 0.2
			levy_reinforcement_rate_different_faith = 0.1
		}

	}

	ck_religious_tolerance_3 = { # Full Acceptance - Can be given titles and positions of power. Different faith opinion increase but same faith opinion decrease
		pass_phrase = ck_religious_tolerance_3_pass_phrase
		confirmation_title = ck_religious_tolerance_3_pass_phrase
		confirmation_button_text = ck_religious_tolerance_confirmation_button_text
		flag = full_religious_tolerance
		can_keep = {
			highest_held_title_tier >= tier_duchy
			is_independent_ruler = yes
		}
		on_pass = {
			custom_tooltip = {
				text = "ck_religious_tolerance_3_pass_tt_zealots"
				every_vassal = {
					if = {
						limit = {
							AND = {
								has_vassal_stance = zealot
								faith = liege.faith
								faith = {
									has_doctrine = doctrine_pluralism_righteous
								}
							}
						}
						add_opinion = {
							target = liege
							modifier = ck_religious_tolerance_3_opinion # Pisses off zealots of righteous doctrine
						}
					}
					else_if = {
						limit = {
							AND = {
								has_vassal_stance = zealot
								faith = liege.faith
								faith = {
									has_doctrine = doctrine_pluralism_fundamentalist
								}
							}
						}
						add_opinion = {
							target = liege
							modifier = ck_religious_tolerance_3_opinion_fundamentalist # Really pisses off fundamentalists
						}
					}
					else_if = {
						limit = {
							AND = {
								NOT = {
									has_vassal_stance = zealot
								}
								faith = liege.faith
								faith = {
									OR = {
										has_doctrine = doctrine_pluralism_fundamentalist
										has_doctrine = doctrine_pluralism_righteous
									}
								}
							}
						}
						add_opinion = {
							target = liege
							modifier = ck_religious_tolerance_3_opinion_nonzealot # Pisses off normal vassals of righteous and fundamentalist
						}
					}
				}
			}
			hidden_effect = {
				remove_jizya_tax_law = yes
			}
		}
		pass_cost = {
			piety = {
				value = 300
				if = {
					limit = {
						faith = {
							has_doctrine = doctrine_pluralism_pluralistic
						}
					}
					multiply = {
						desc = "ck_tolerance_3_desc"
						value = 0.5
					}
				}
				if = {
					limit = {
						faith = {
							has_doctrine = doctrine_pluralism_fundamentalist
						}
					}
					multiply = {
						desc = "ck_tolerance_3_desc_2"
						value = 1.5
					}
				}
				if = {
					limit = {
						faith = {
							has_doctrine = doctrine_pluralism_righteous
						}
					}
					multiply = {
						desc = "ck_tolerance_3_desc_3"
						value = 1.25
					}
				}
			}
		}
		modifier = {
			minority_different_faith_opinion = 5
			zealot_same_faith_opinion = -20
			domain_tax_different_faith_mult = 0.25
			levy_reinforcement_rate_different_faith = 0.15
		}
	}
}