namespace = ck_imperial_events

ck_imperial_events.0001 = { # Proclaim self as the Emperor
	type = character_event
	title = ck_imperial_events.0001.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = {
						this = scope:new_title.holder
					}
				}
				desc = ck_imperial_events.0001.desc.a
			}
			triggered_desc = {
				trigger = {
					root = {
						NOT = {
							this = scope:new_title.holder
						}
					}
				}
				desc = ck_imperial_events.0001.desc.b
			}
		}
	}
	theme = ck_imperial
	right_portrait = {
		character = scope:new_title.holder
		animation = personality_bold
	}
	override_background = { reference = throne_room_mediterranean }
	
	immediate = {
		play_music_cue = "mx_ck_calradian_war"
	}
	
	option = {
		name = {
			trigger = { 
				root = {
					this = scope:new_title.holder
				}
			}
			text = ck_imperial_events.0001.a.root #I shall restore the Empire to its former glory 
		}
		name = {
			trigger = { 
				root = {
					NOT = {
						this = scope:new_title.holder
					}
					has_trait = claimant_emperor
				}
			}
			text = ck_imperial_events.0001.a.emperors #Another false pretendent I will squash
		}
		name = {
			trigger = { 
				root = {
					NOT = {
						this = scope:new_title.holder
					}
					NOT = {
						has_trait = claimant_emperor
					}
					culture = {
						has_cultural_pillar = heritage_calradian
					}
				}
			}
			text = ck_imperial_events.0001.a.calradians #Dark days are ahead of us
		}
		name = {
			trigger = { 
				root = {
					NOT = {
						this = scope:new_title.holder
					}
					NOT = {
						has_trait = claimant_emperor
					}
					NOT = {
						culture = {
							has_cultural_pillar = heritage_calradian
						}
					}
				}
			}
			text = ck_imperial_events.0001.a.foreigners #The Calradians can't seem to decide who rules over them
		}
	}	
	
}
ck_imperial_events.0002 = { # Accepted demand to change faction WIP - add more descs
	type = letter_event
	opening = {
		desc = {
			first_valid = {
				triggered_desc = {
					trigger = {
						scope:recipient = {
							opinion = {
								target = scope:actor
								value >= 40
							}
						}
					}
					desc = ck_imperial_events.0002.opening.a
				}
				desc = ck_imperial_events.0002.opening
			}
		}
	}
	sender = scope:recipient
	desc = { 
		first_valid = {
			triggered_desc = {
				trigger = {
					root = {
						has_trait = ck_oligarch
					}
				}
				desc = ck_imperial_events.0002.desc.a
			}
			triggered_desc = {
				trigger = {
					root = {
						has_trait = ck_militarist
					}
				}
				desc = ck_imperial_events.0002.desc.b
			}
			triggered_desc = {
				trigger = {
					root = {
						has_trait = ck_royalist
					}
				}
				desc = ck_imperial_events.0002.desc.c
			}
			triggered_desc = {
				trigger = {
					root = {
						has_trait = ck_populist
					}
				}
				desc = ck_imperial_events.0002.desc.d
			}
			desc = ck_imperial_events.0002.desc # Fallback
		}
	}
	option = {
		name = ck_imperial_events.0002.a
	}
}
ck_imperial_events.0003 = { # Rejected demand to change faction WIP - add more descs
	type = letter_event
	opening = {
		desc = {
			first_valid = {
				triggered_desc = {
					trigger = {
						scope:recipient = {
							opinion = {
								target = scope:actor
								value >= 40
							}
						}
					}
					desc = ck_imperial_events.0002.opening.a
				}
				desc = ck_imperial_events.0002.opening
			}
		}
	}
	sender = scope:recipient
	desc = { 
		desc = ck_imperial_events.0003.desc # PLACEHOLDER
	}
	option = {
		name = ck_imperial_events.0003.a
		scope:actor = {
			add_opinion = {
				modifier = refused_my_demand
				years = 2
				target = scope:recipient
			}
		}
	}
}
ck_imperial_events.0004 = { # Liberator event
	type = character_event
	title = ck_imperial_events.0004.t
	desc = ck_imperial_events.0004.desc
	theme = war
	right_portrait = {
		character = scope:attacker
		animation = war_over_win
	}
	override_background = { reference = farmland }
	
	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
		scope:defender.primary_title = {
			save_scope_as = primary_tit
		}
		scope:target.primary_title = {
			save_scope_as = targetdesc
		}
	}
	
	option = {
		name = ck_imperial_events.0004.a
		give_nickname = nick_the_liberator_ck
		add_prestige = 800
		add_legitimacy = 40
	}
}
ck_imperial_events.0005 = { # Preparing expedition
	type = character_event
	title = ck_imperial_events.0005.t
	desc = ck_imperial_events.0005.desc
	theme = ck_imperial
	right_portrait = { ###PLACEHOLDER
		character = root
		animation = war_over_win
	}	
	override_background = { reference = army_camp }
	
	option = { # Onwards
		name = ck_imperial_events.0005.a
		custom_tooltip = will_prepare_expedition_event_tt
		custom_tooltip = can_invite_vassals_tt
		custom_tooltip = will_be_ready_2_months_tt
		
		trigger_event = {
			id = ck_imperial_events.0007
			months = 2
		}
		add_character_flag = {
			flag = preparing_imperial_expedition
			years = 1
		}
		add_character_flag = { 
			flag = expedition_cooldown
			years = 6
		}
		every_vassal_or_below = {
			limit = {
				is_ai = no
			}
			trigger_event = {
				id = ck_imperial_events.0006 # Inform the players
			}
		}
		hidden_effect = {
			random_list = { ### FLAVOUR EVENTS HERE
				2 = {
					trigger_event = {
						id = ck_imperial_events.0015
						days = { 14 49 }
					}
				}
				2 = {
					trigger = {
						any_vassal_or_below = {
							is_ai = yes
							has_trait = ck_populist
							is_capable_adult = yes
							is_imprisoned = no
						}
					}
					trigger_event = {
						id = ck_imperial_events.0016
						days = { 14 49 }
					}
				}
				2 = {
					trigger = {
						any_vassal_or_below = {
							is_ai = yes
							has_trait = ck_oligarch
							is_capable_adult = yes
							is_imprisoned = no
						}
					}
					trigger_event = {
						id = ck_imperial_events.0017
						days = { 14 49 }
					}
				}
				2 = {
					trigger = {
						any_vassal_or_below = {
							is_ai = yes
							has_trait = ck_royalist
							is_capable_adult = yes
							is_imprisoned = no
						}
					}
					trigger_event = {
						id = ck_imperial_events.0018
						days = { 14 49 }
					}
				}
				2 = {
					trigger = {
						any_vassal_or_below = {
							is_ai = yes
							has_trait = ck_militarist
							martial >= 12
							is_capable_adult = yes
							is_imprisoned = no
						}
					}
					trigger_event = {
						id = ck_imperial_events.0019
						days = { 14 49 }
					}
				}
				2 = {
					trigger = {
						any_vassal_or_below = {
							is_ai = yes
							has_trait = ck_royalist
							is_capable_adult = yes
							is_imprisoned = no
						}
						any_vassal_or_below = {
							is_ai = yes
							has_trait = ck_militarist
							martial >= 12
							is_capable_adult = yes
							is_imprisoned = no
						}
					}
					trigger_event = {
						id = ck_imperial_events.0019
						days = { 14 49 }
					}
					trigger_event = {
						id = ck_imperial_events.0018
						days = { 14 49 }
					}
				}
				2 = {
					trigger = {
						any_vassal_or_below = {
							is_ai = yes
							has_trait = ck_populist
							is_capable_adult = yes
							is_imprisoned = no
						}
						any_vassal_or_below = {
							is_ai = yes
							has_trait = ck_oligarch
							is_capable_adult = yes
							is_imprisoned = no
						}
					}
					trigger_event = {
						id = ck_imperial_events.0017
						days = { 14 49 }
					}
					trigger_event = {
						id = ck_imperial_events.0016
						days = { 14 49 }
					}
				}
				2 = {
					trigger = {
						any_vassal_or_below = {
							is_ai = yes
							has_trait = ck_militarist
							martial >= 12
							is_capable_adult = yes
							is_imprisoned = no
						}
					}
					trigger_event = {
						id = ck_imperial_events.0019
						days = { 14 49 }
					}
					trigger_event = {
						id = ck_imperial_events.0015
						days = { 14 49 }
					}
				}
			}
		}
		
	}
	option = { # On a second thought, internal matters are more important
		name = ck_imperial_events.0005.b
		custom_tooltip = {
			text = refund_expedition_decision_tt
			add_gold = 250 #Returns gold from decision
		}
	}
}
ck_imperial_events.0006 = { #Information for players about preparations for expedition
	type = character_event
	title = ck_imperial_events.0006.t
	desc = ck_imperial_events.0006.desc
	theme = ck_imperial
	override_background = { reference = army_camp }
	right_portrait = { ###PLACEHOLDER
		character = root.top_liege
		animation = marshal
	}
	immediate = {
		root.top_liege = {
			save_scope_as = expedition_emperor
		}
		root.top_liege.primary_title = {
			save_scope_as = expedition_empire_title
		}
	}
	
	option = { # ok
		name = ck_imperial_events.0006.a
	}
	option = { # Player can decide to join the expedition
		name = ck_imperial_events.0006.b
		custom_tooltip = you_will_join_expedition06_tt
		add_character_flag = {
			flag = will_join_expedition
			years = 1
		}
	}
}
ck_imperial_events.0007 = { #Finished preparations for expedition
	type = character_event
	title = ck_imperial_events.0007.t
	desc = ck_imperial_events.0007.desc
	theme = ck_imperial
	override_background = { reference = army_camp }
	right_portrait = { ###PLACEHOLDER
		character = root.top_liege
		animation = marshal
	}
	
	trigger = {
		has_character_flag = preparing_imperial_expedition
	}
	
	immediate = {
		capital_barony = {
			save_scope_as = military_camps_province
		}
	}
	
	option = { # lets roll 
		name = ck_imperial_events.0007.a
		custom_tooltip = expedition_ready_cb_tt
		custom_tooltip = declare_war_warning_tt
		add_character_flag = {
			flag = has_expedition_cb
		}
		trigger_event = {
			id = ck_imperial_events.0008
			months = 6
		}
	}
}
ck_imperial_events.0008 = { #Expedition failed to begin
	type = character_event
	title = ck_imperial_events.0008.t
	desc = ck_imperial_events.0008.desc
	theme = ck_imperial
	right_portrait = { ###PLACEHOLDER
		character = root
		animation = worry
	}
	
	trigger = {
		has_character_flag = preparing_imperial_expedition
	}
	
	option = { # You're weak. You're outta control. And you've become an embarrassment to yourself and everybody else.
		name = ck_imperial_events.0008.a
		add_legitimacy = -100
		add_prestige = monumental_prestige_loss
		add_prestige_level = -2
		add_stress = medium_stress_impact_gain

		if = {
			limit = {
				has_faith = faith:calradic
			}
			add_piety = -1000
		}

		add_character_modifier = {
			modifier = failed_to_begin_expedition_modifier
			years = 2
		}
		
		remove_character_flag = preparing_imperial_expedition
		remove_character_flag = has_expedition_cb
		remove_character_flag = promised_title_expedition
		
		### REMINDER - REMOVE CHARACTER FLAGS FROM FLAVOR EVENTS ###
		
		every_vassal_or_below = {
			if = {
				limit = {
					has_character_flag = will_join_expedition
				}
				remove_character_flag = will_join_expedition
			}
		}
		every_vassal_or_below = {
			if = {
				limit = {
					has_character_flag = was_promised_title_expedition
				}
				remove_character_flag = was_promised_title_expedition
			}
		}
	}
}
ck_imperial_events.0009 = { #Expedition postponed
	type = character_event
	title = ck_imperial_events.0009.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					is_at_war = no
				}
				desc = ck_imperial_events.0009.desc.a
			}
			triggered_desc = {
				trigger = {
					is_at_war = yes
				}
				desc = ck_imperial_events.0009.desc.b
			}
		}
	}
	theme = ck_imperial
	override_background = { reference = army_camp }
	right_portrait = { ###PLACEHOLDER
		character = root.top_liege
		animation = worry
	}
	
	option = { #Unfortunate
		name = ck_imperial_events.0009.a
		custom_tooltip = expedition_postponed_tt ##Shortened expedition cooldown and some general info
		custom_tooltip = expedition_postponed_cooldown_tt
		
		remove_character_flag = preparing_imperial_expedition
		remove_character_flag = expedition_cooldown
		remove_character_flag = has_expedition_cb
		remove_character_flag = agreed_to_expedition_colonization
		remove_character_flag = promised_title_expedition
		
		### REMINDER - REMOVE CHARACTER FLAGS FROM FLAVOR EVENTS ###
		
		add_character_flag = {
			flag = expedition_cooldown
			years = 2
		}
		every_vassal_or_below = {
			if = {
				limit = {
					has_character_flag = will_join_expedition
				}
				remove_character_flag = will_join_expedition
			}
		}
		every_vassal_or_below = {
			if = {
				limit = {
					has_character_flag = was_promised_title_expedition
				}
				remove_character_flag = was_promised_title_expedition
			}
		}
	}
}
ck_imperial_events.0010 = { #Expedition begins - for emperor
	type = character_event
	title = ck_imperial_events.0010.t
	desc = ck_imperial_events.0010.desc
	theme = ck_imperial
	override_background = { reference = wilderness }
	right_portrait = { ###PLACEHOLDER
		character = root.top_liege
		animation = marshal
	}
	
	immediate = {
		random_character_war = {
			if = {
				limit = {
					using_cb = imperial_expedition_cb
				}
				save_scope_as = expedition_war
			}
		}
		primary_title = {
			save_scope_as = nazwaimperium
		}
	}
	
	option = { #The Valiant die but once!
		name = ck_imperial_events.0010.a
		
		
		remove_character_flag = has_expedition_cb
		remove_character_flag = preparing_imperial_expedition
		custom_tooltip = { 
			text = pledged_vassals_join_the_war_tt
			every_vassal_or_below = {
				if = { 
					limit = {
						has_character_flag = will_join_expedition
					}
					add_character_flag = took_part_in_expedition
					save_temporary_scope_as = pledged_vassal
					scope:expedition_war = {
						add_attacker = scope:pledged_vassal
					}
				}
			}
		}
		hidden_effect = { # Imitation of pledged vassals joining
			if = {
				limit = {
					is_ai = yes
					any_vassal_or_below = {
						NOT = {
							has_character_flag = will_join_expedition
						}
					}
				}
				trigger_event = ck_imperial_events.0012
			}
		}
		every_vassal_or_below = {
			if = {
				limit = {
					has_character_flag = will_join_expedition
				}
				remove_character_flag = will_join_expedition
			}
		}
	}
}
ck_imperial_events.0011 = { #Expedition begins - for vassals
	type = character_event
	title = ck_imperial_events.0011.t
	desc = ck_imperial_events.0011.desc
	theme = ck_imperial
	override_background = { reference = wilderness }
	right_portrait = { ###PLACEHOLDER
		character = scope:emperor_expedition
		animation = marshal
	}
	
	immediate = {
		top_liege = {
			save_scope_as = emperor_expedition
			random_character_war = {
				if = {
					limit = {
						using_cb = imperial_expedition_cb
					}
					save_scope_as = expedition_war
				}
			}
		}
		top_liege.primary_title = {
			save_scope_as = nazwaimperium
		}
	}
	
	option = { #The Valiant die but once!
		name = ck_imperial_events.0010.a
		
	}
	option = { #Join the war
		name = ck_imperial_events.0011.b
		trigger = {
			is_ai = no
			NOT = {
				has_character_flag = will_join_expedition
			}
		}
		add_character_flag = took_part_in_expedition
		scope:expedition_war = {
			add_attacker = root
		}
	}
}
ck_imperial_events.0012 = { #Imitation of pledged vassals joining - for AI 
	hidden = yes
	type = character_event
	
	immediate = {
		random_character_war = {
			if = {
				limit = {
					using_cb = imperial_expedition_cb
				}
				save_scope_as = expedition_war
			}
		}
	}
	
	option = { ### Repeating it 4 times
		random_vassal_or_below = {  ### Choosing vassals to join
			limit = {
				is_ai = yes
				is_at_war = no
				is_imprisoned = no
				gold > 10
				OR = {
					AND = {
						has_trait = ck_militarist
						opinion = {
							target = root
							value >= 5
						}
					}
					AND = {
						OR = {
							has_trait = ck_oligarch
							has_trait = ck_royalist
							has_trait = ck_populist
						}
						opinion = {
							target = root
							value >= 50
						}
					}
				}
			}
			add_character_flag = took_part_in_expedition
			save_temporary_scope_as = AI_pledged_vassal
			scope:expedition_war = {
				add_attacker = scope:AI_pledged_vassal
			}
		}
		random_vassal_or_below = {  ### Choosing vassals to join
			limit = {
				is_ai = yes
				is_at_war = no
				is_imprisoned = no
				gold > 10
				OR = {
					AND = {
						has_trait = ck_militarist
						opinion = {
							target = root
							value >= 5
						}
					}
					AND = {
						OR = {
							has_trait = ck_oligarch
							has_trait = ck_royalist
							has_trait = ck_populist
						}
						opinion = {
							target = root
							value >= 50
						}
					}
				}
			}
			add_character_flag = took_part_in_expedition
			save_temporary_scope_as = AI_pledged_vassal
			scope:expedition_war = {
				add_attacker = scope:AI_pledged_vassal
			}
		}
		random_vassal_or_below = {  ### Choosing vassals to join
			limit = {
				is_ai = yes
				is_at_war = no
				is_imprisoned = no
				gold > 10
				OR = {
					AND = {
						has_trait = ck_militarist
						opinion = {
							target = root
							value >= 5
						}
					}
					AND = {
						OR = {
							has_trait = ck_oligarch
							has_trait = ck_royalist
							has_trait = ck_populist
						}
						opinion = {
							target = root
							value >= 50
						}
					}
				}
			}
			add_character_flag = took_part_in_expedition
			save_temporary_scope_as = AI_pledged_vassal
			scope:expedition_war = {
				add_attacker = scope:AI_pledged_vassal
			}
		}
		random_vassal_or_below = {  ### Choosing vassals to join
			limit = {
				is_ai = yes
				is_at_war = no
				is_imprisoned = no
				gold > 10
				OR = {
					AND = {
						has_trait = ck_militarist
						opinion = {
							target = root
							value >= 5
						}
					}
					AND = {
						OR = {
							has_trait = ck_oligarch
							has_trait = ck_royalist
							has_trait = ck_populist
						}
						opinion = {
							target = root
							value >= 50
						}
					}
				}
			}
			add_character_flag = took_part_in_expedition
			save_temporary_scope_as = AI_pledged_vassal
			scope:expedition_war = {
				add_attacker = scope:AI_pledged_vassal
			}
		}
	}
}
ck_imperial_events.0013 = { ### Expedition failed
	type = character_event
	title = ck_imperial_events.0013.t
	desc = { 
		first_valid = {
			triggered_desc = {
				trigger = {
					root = {
						this = scope:emperor_failure
					}
				}
				desc = ck_imperial_events.0013.desc
			}
			triggered_desc = {
				trigger = {
					root = {
						is_vassal_or_below_of = scope:emperor_failure
					}
				}
				desc = ck_imperial_events.0013.desc.vassal
			}
			triggered_desc = {
				trigger = {
					root = {
						NOT = {
							is_vassal_or_below_of = scope:emperor_failure
						}
						NOT = {
							this = scope:emperor_failure
						}
					}
				}
				desc = ck_imperial_events.0013.desc.other
			}
		}
	}
	theme = ck_imperial
	override_background = { reference = wilderness }
	right_portrait = { ###PLACEHOLDER
		character = scope:emperor_failure
		animation = worry
	}
	immediate = { ### for loc sake
		hidden_effect = {
			scope:emperor_failure = {
				save_scope_as = emperor_failure_loc
				if = {
					limit = {
						has_character_flag = promised_title_expedition
					}
					remove_character_flag = promised_title_expedition
				}
				every_vassal_or_below = {
					remove_character_flag = was_promised_title_expedition
					remove_character_modifier = is_promised_new_title_modifier
				}
			}
		}
		capital_barony = {
			save_scope_as = nazwastolicy
		}
		scope:emperor_failure.primary_title = {
			save_scope_as = empirename
		}
	}
	
	option = { # Option for Emperor # I went and saw, but left without conquest, only the bitterness of defeat…
		name = ck_imperial_events.0013.a
		
		trigger = {
			root = {
				this = scope:emperor_failure
			}
		}
		
		add_prestige = major_prestige_loss
		add_prestige_level = -1
		add_legitimacy = -100
		add_piety = -1000
		
		add_character_modifier = {
			modifier = failed_expedition_modifier
			months = 18
		}
		custom_tooltip = {
			text = vassals_not_happy_tt
			every_vassal_or_below = {
				add_opinion = {
					modifier = failure_expedition_opinion_modifier
					months = 16
					target = root
				}
			}
		}
	}
	option = { # Option for vassals 
		name = ck_imperial_events.0013.b
		
		trigger = {
			is_vassal_or_below_of = scope:emperor_failure
		}
		
		if = {
			limit = {
				has_character_flag = took_part_in_expedition
			}
			remove_character_flag = took_part_in_expedition
		}
		
		custom_tooltip = emperor_infamy_tt
	}
	option = { # Option for other Calradians 
		name = ck_imperial_events.0013.c
		
		trigger = {
			NOT = {
				this = scope:emperor_failure
			}
			NOT = {
				is_vassal_or_below_of = scope:emperor_failure
			}
			culture = {
				has_cultural_pillar = heritage_calradian
			}
		}
		
		if = {
			limit = {
				has_character_flag = took_part_in_expedition
			}
			remove_character_flag = took_part_in_expedition
		}
		
		custom_tooltip = emperor_infamy_tt
	}
}
ck_imperial_events.0014 = { ### Expedition success
	type = character_event
	title = ck_imperial_events.0014.t
	desc = { 
		first_valid = {
			triggered_desc = {
				trigger = {
					root = {
						this = scope:emperor_success
					}
				}
				desc = ck_imperial_events.0014.desc
			}
			triggered_desc = {
				trigger = {
					root = {
						is_vassal_or_below_of = scope:emperor_success
					}
				}
				desc = ck_imperial_events.0014.desc.vassal
			}
			triggered_desc = {
				trigger = {
					root = {
						NOT = {
							is_vassal_or_below_of = scope:emperor_success
						}
						NOT = {
							this = scope:emperor_success
						}
					}
				}
				desc = ck_imperial_events.0014.desc.other
			}
		}
	}
	theme = ck_imperial
	override_background = { reference = wilderness }
	right_portrait = { ###PLACEHOLDER
		character = scope:emperor_success
		animation = war_over_win
	}
	immediate = { ### for loc sake
		scope:emperor_success = {
			save_scope_as = emperor_success_loc
		}
		capital_barony = {
			save_scope_as = nazwastolicy
		}
		scope:emperor_success.primary_title = {
			save_scope_as = empirename
		}
	}
	
	option = { # Option for Emperor # 
		name = ck_imperial_events.0014.a
		
		trigger = {
			root = {
				this = scope:emperor_success
			}
		}
		
		add_prestige = 750
		add_legitimacy = 50
		add_piety = 500
		
		add_character_modifier = {
			modifier = victorious_expedition_modifier
			months = 16
		}
		custom_tooltip = {
			text = vassals_happy_tt
			every_vassal_or_below = {
				add_opinion = {
					modifier = successful_expedition_opinion_modifier
					months = 16
					target = root
				}
			}
		}
	}
	option = { # Option for vassals 
		name = ck_imperial_events.0014.b
		
		trigger = {
			is_vassal_or_below_of = scope:emperor_success
		}
		
		if = {
			limit = {
				has_character_flag = took_part_in_expedition
			}
			remove_character_flag = took_part_in_expedition
			add_character_modifier = {
				modifier = vassal_victorious_expedition_modifier
				months = 8
			}
			add_piety = 250
			add_legitimacy = 25
			add_prestige = 450
			add_gold = { 25 150 }
		}
		
	}
	option = { # Option for other Calradians 
		name = ck_imperial_events.0014.c
	
		
		trigger = {
			NOT = {
				this = scope:emperor_success
			}
			NOT = {
				is_vassal_or_below_of = scope:emperor_success
			}
			culture = {
				has_cultural_pillar = heritage_calradian
			}
		}
		
		if = {
			limit = {
				has_character_flag = took_part_in_expedition
			}
			remove_character_flag = took_part_in_expedition
		}
		
	}
}
ck_imperial_events.0015 = { ### Local Patricians offer support for the Expedition
	type = character_event
	title = ck_imperial_events.0015.t
	desc = ck_imperial_events.0015.desc
	theme = ck_imperial
	override_background = { reference = ck_senate }
	right_portrait = { ###PLACEHOLDER
		character = root
		animation = thinking
	}
	immediate = {
		capital_barony = {
			save_scope_as = stolica
		}
	}
	
	trigger = {
		has_character_flag = preparing_imperial_expedition
	}
	
	option = { #Gladly!
		name = ck_imperial_events.0015.a
		custom_tooltip = {
			text = will_please_militarists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_militarist
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
		custom_tooltip = {
			text = will_upset_royalists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_royalist
				}
				add_opinion = {
					modifier = expedition_upset_minor
					target = root
					years = 2
				}
			}
		}
		random_list = {
			5 = {
				add_gold = 350
			}
			5 = {
				custom_tooltip = {
					text = patricians_host_army_tt
					spawn_army = {
						men_at_arms = {
							type = imperial_heavy_cavalry_2
							men = 100
						}
						origin = capital_province
						location = capital_province
						name = patrician_sponsored_host_name
						inheritable = no
					}
					send_interface_toast = {
						title = received_patrician_host_title
					}
				}
			}
		}
	}
	option = { #No, thanks.
		name = ck_imperial_events.0015.b
		add_prestige = minor_prestige_gain
		custom_tooltip = {
			text = will_please_royalists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_royalist
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
	}
	option = { #Spend it on the common people instead!
		name = ck_imperial_events.0015.c
		add_piety = minor_piety_gain
		add_prestige = minor_prestige_loss
		stress_impact = {
			generous = minor_stress_loss
			improvident = minor_stress_loss
		}
		add_character_modifier = {
			modifier = man_of_the_plebians_modifier
			years = 5
		}
		custom_tooltip = {
			text = will_please_populists.m
			every_vassal_or_below = {
				limit = {
					has_trait = ck_populist
				}
				add_opinion = {
					modifier = expedition_pleased_major
					target = root
					years = 2
				}
			}
		}
		custom_tooltip = {
			text = will_upset_militarists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_militarist
				}
				add_opinion = {
					modifier = expedition_upset_minor
					target = root
					years = 2
				}
			}
		}
		custom_tooltip = {
			text = will_upset_oligarchs
			every_vassal_or_below = {
				limit = {
					has_trait = ck_oligarch
				}
				add_opinion = {
					modifier = expedition_upset_minor
					target = root
					years = 2
				}
			}
		}
	}
}
ck_imperial_events.0016 = { ### Populist Vassal ask that conquered land be given to homeless plebians
	type = character_event
	title = ck_imperial_events.0016.t
	desc = ck_imperial_events.0016.desc
	theme = ck_imperial
	override_background = { reference = ck_senate }
	right_portrait = { ###PLACEHOLDER
		character = root
		animation = war_over_win
	}
	left_portrait = { ###PLACEHOLDER
		character = scope:asking_populist
		animation = throne_room_conversation_1
	}
	
	trigger = {
		has_character_flag = preparing_imperial_expedition
		any_vassal_or_below = {
			is_ai = yes
			has_trait = ck_populist
			is_capable_adult = yes
			is_imprisoned = no
		}
	}
	
	immediate = {
		random_vassal_or_below = {
			limit = {
				is_ai = yes
				has_trait = ck_populist
				is_capable_adult = yes
				is_imprisoned = no
			}
			save_scope_as = asking_populist
		}
		primary_title = {
			save_scope_as = nazwaimperium
		}
	}
	
	option = { #Wise idea
		name = ck_imperial_events.0016.a
		custom_tooltip = {
			text = random_conquered_province_colonized_tt
			add_character_flag = agreed_to_expedition_colonization
		}
		custom_tooltip = {
			text = will_please_populists.m
			every_vassal_or_below = {
				limit = {
					has_trait = ck_populist
				}
				add_opinion = {
					modifier = expedition_pleased_major
					target = root
					years = 2
				}
			}
		}
	}
	option = { #Give it to the soldiers instead.
		name = ck_imperial_events.0016.b
		add_prestige = minor_prestige_gain
		custom_tooltip = {
			text = will_upset_populists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_populist
				}
				add_opinion = {
					modifier = expedition_upset_minor
					target = root
					years = 2
				}
			}
		}
		custom_tooltip = {
			text = will_please_militarists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_militarist
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
	}
}
ck_imperial_events.0017 = { ### Oligarch vassal ask that we focus on the empire 
	type = character_event
	title = ck_imperial_events.0017.t
	desc = ck_imperial_events.0017.desc
	theme = ck_imperial
	override_background = { reference = ck_senate }
	right_portrait = { ###PLACEHOLDER
		character = root
		animation = war_over_win
	}
	left_portrait = { ###PLACEHOLDER
		character = scope:asking_oligarch
		animation = throne_room_conversation_1
	}
	
	trigger = {
		has_character_flag = preparing_imperial_expedition
		any_vassal_or_below = {
			is_ai = yes
			has_trait = ck_oligarch
			is_capable_adult = yes
			is_imprisoned = no
		}
	}
	
	immediate = {
		random_vassal_or_below = {
			limit = {
				is_ai = yes
				has_trait = ck_oligarch
				is_capable_adult = yes
				is_imprisoned = no
			}
			save_scope_as = asking_oligarch
		}
		primary_title = {
			save_scope_as = nazwaimperium
		}
	}
	
	option = { #Fine
		name = ck_imperial_events.0017.a
		custom_tooltip = will_end_the_expedition
		add_gold = 300
		add_prestige = major_prestige_loss
		custom_tooltip = {
			text = will_please_oligarchs
			every_vassal_or_below = {
				limit = {
					has_trait = ck_oligarch
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
		custom_tooltip = {
			text = will_upset_militarists.m
			every_vassal_or_below = {
				limit = {
					has_trait = ck_militarist
				}
				add_opinion = {
					modifier = expedition_upset_major
					target = root
					years = 2
				}
			}
		}
		stress_impact = {
			ambitious = medium_stress_impact_gain
			arrogant = medium_stress_impact_gain
		}
		trigger_event = ck_imperial_events.0009
	}
	option = { #This is my Empire!
		name = ck_imperial_events.0017.b
		add_prestige = medium_prestige_gain
		custom_tooltip = {
			text = will_upset_oligarchs
			every_vassal_or_below = {
				limit = {
					has_trait = ck_oligarch
				}
				add_opinion = {
					modifier = expedition_upset_minor
					target = root
					years = 2
				}
			}
		}
		custom_tooltip = {
			text = will_please_militarists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_militarist
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
		custom_tooltip = {
			text = will_please_royalists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_royalist
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
	}
	option = { #To the dungeons with you!
		name = ck_imperial_events.0017.c
		trigger = {
			OR = {
				has_trait = arbitrary
				has_trait = lunatic
				has_trait = possessed
				has_trait = sadistic
				has_trait = callous
				has_trait = wrathful
			}
		}
		scope:asking_oligarch = {
			hard_imprison_character_effect = {
				TARGET = this
				IMPRISONER = root
			}
		}
		add_tyranny = 20
		add_dread = 20
		custom_tooltip = {
			text = will_please_militarists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_militarist
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
	}
}
ck_imperial_events.0018 = { ### Royalist vassal asks to be compensated for role in expedition 
	type = character_event
	title = ck_imperial_events.0018.t
	desc = ck_imperial_events.0018.desc
	theme = ck_imperial
	override_background = { reference = ck_senate }
	right_portrait = { ###PLACEHOLDER
		character = root
		animation = war_over_win
	}
	left_portrait = { ###PLACEHOLDER
		character = scope:asking_royalist
		animation = throne_room_conversation_1
	}
	
	trigger = {
		has_character_flag = preparing_imperial_expedition
		any_vassal_or_below = {
			is_ai = yes
			has_trait = ck_royalist
			is_capable_adult = yes
			is_imprisoned = no
		}
	}
	immediate = {
		random_vassal_or_below = {
			limit = {
				is_ai = yes
				has_trait = ck_royalist
				is_capable_adult = yes
				is_imprisoned = no
			}
			save_scope_as = asking_royalist
		}
	}
	
	option = { #Fine
		name = ck_imperial_events.0018.a
		pay_short_term_gold = {
			target = scope:asking_royalist
			gold = medium_gold_value
		}
		scope:asking_royalist = {
			add_opinion = {
				modifier = bribe_expedition
				target = root
				years = 3
			}
		}
		custom_tooltip = {
			text = will_upset_other_vassals_tt
			every_vassal = {
				limit = {
					NOT = {
						this = scope:asking_royalist
					}
				}
				add_opinion = {
					modifier = unfair_treatment_expedition
					target = root
					years = 1
				}
			}
		}
	}
	option = { #Then you should send more men!
		name = ck_imperial_events.0018.b
		pay_short_term_gold = {
			target = scope:asking_royalist
			gold = medium_gold_value
		}
		scope:asking_royalist = {
			add_opinion = {
				modifier = bribe_expedition_smaller
				target = root
				years = 3
			}
		}
		custom_tooltip = {
			text = you_will_pay_for_host_tt
			remove_short_term_gold = 45
		}
		custom_tooltip = {
			text = royalist_host_army_tt
			spawn_army = {
				men_at_arms = {
					type = imperial_heavy_cavalry_2
					men = 50
				}
				men_at_arms = {
					type = imperial_heavy_cavalry_1
					men = 50
				}
				origin = capital_province
				location = capital_province
				name = royalist_sponsored_host_name
				inheritable = no
			}
			send_interface_toast = {
				title = received_royalist_host_title
			}
		}
		custom_tooltip = {
			text = will_please_militarists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_militarist
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
	}
	option = { #Preposterous!
		name = ck_imperial_events.0018.c
		add_prestige = medium_prestige_gain
		scope:asking_royalist = {
			add_opinion = {
				modifier = denied_request_expedition_modifier
				target = root
				months = 18
			}
		}
		custom_tooltip = {
			text = will_upset_royalists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_royalist
				}
				add_opinion = {
					modifier = expedition_upset_minor
					target = root
					years = 2
				}
			}
		}
	}
}
ck_imperial_events.0019 = { ### Militarist Vassal Presents Expedition Plan
	type = character_event
	title = ck_imperial_events.0019.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					is_female = yes
				}
				desc = ck_imperial_events.0019.desc.f
			}
			desc = ck_imperial_events.0019.desc
		}
	}
	theme = ck_imperial
	override_background = { reference = army_camp }
	right_portrait = { ###PLACEHOLDER
		character = root
		animation = war_over_win
	}
	left_portrait = { ###PLACEHOLDER
		character = scope:asking_militarist
		animation = throne_room_conversation_1
	}
	
	trigger = {
		has_character_flag = preparing_imperial_expedition
		any_vassal_or_below = {
			is_ai = yes
			has_trait = ck_militarist
			martial >= 12
			is_capable_adult = yes
			is_imprisoned = no
		}
	}
	immediate = {
		random_vassal_or_below = {
			limit = {
				is_ai = yes
				has_trait = ck_militarist
				martial >= 12
				is_capable_adult = yes
				is_imprisoned = no
			}
			save_scope_as = asking_militarist
		}
	}
	
	option = { #Interesting, tell me more of this strategy.
		name = ck_imperial_events.0019.a
		scope:asking_militarist = {
			add_hook = {
				type = favor_hook
				target = root
				years = 4
			}
		}
		add_character_modifier = {
			modifier = vassal_strategies_modifier
			years = 5
		}
		custom_tooltip = {
			text = will_please_militarists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_militarist
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
	}
	option = { #I have no need of your strategies.
		name = ck_imperial_events.0019.b
		scope:asking_militarist = {
			add_opinion = {
				modifier = denied_strategy_expedition_modifier
				target = root
				years = 2
			}
		}
		custom_tooltip = {
			text = will_upset_militarists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_militarist
				}
				add_opinion = {
					modifier = expedition_upset_minor
					target = root
					years = 2
				}
			}
		}
	}
}
ck_imperial_events.0020 = { ### Restoring Calradian Empire
	type = character_event
	title = ck_imperial_events.0020.t
	desc = ck_imperial_events.0020.desc
	theme = ck_imperial
	right_portrait = {
		character = root
		animation = personality_bold
	}
	override_background = { reference = throne_room_mediterranean }
	
	immediate = {
		play_music_cue = "mx_ck_calradian_war"

		hidden_effect = {
			get_title = title:e_calradian_empire
			set_primary_title_to = title:e_calradian_empire
			every_held_title = {
				limit = {
					tier = tier_empire
					NOT = {
						this = title:e_calradian_empire
					}
				}
				holder = {
					destroy_title = prev
				}
			}
		}
	}
	
	option = {
		name = ck_imperial_events.0020.a
		add_trait = restorer_emperor
		give_nickname = nick_the_restorer_ck
		add_prestige = 3000
		add_legitimacy = 100
		if = {
			limit = {
				has_faith = faith:calradic
			}
			add_piety = 1000
		}
		if = {
			limit = {
				any_ruler = {
					has_trait = claimant_emperor
				}
			}
			custom_tooltip = will_receive_depose_cb_tt
		}
		custom_tooltip = {
			text = calradians_happy_tt
			every_living_character = {
				limit = {
					culture = {
						has_cultural_pillar = heritage_calradian
					}
					NOT = {
						has_trait = claimant_emperor
					}
					NOR = {
						has_relation_rival = root
						has_relation_nemesis = root
					}
				}
				add_opinion = {
					modifier = restored_calradian_empire_modifier
					years = 3
					target = root
				}
			}
		}
		every_player = {
			limit = {
				NOR = {
					this = root
					has_trait = claimant_emperor
				}
			}
			trigger_event = ck_imperial_events.0021
		}
		every_ruler = {
			limit = {
				has_trait = claimant_emperor
			}
			trigger_event = {	
				id = ck_imperial_events.0022
				days = 1
			}
		}
	}
}
ck_imperial_events.0021 = { ### Calradian Empire Restored - for players
	type = character_event
	title = ck_imperial_events.0021.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					culture = {
						has_cultural_pillar = heritage_calradian
					}
				}
				desc = ck_imperial_events.0021.desc
			}
			triggered_desc = {
				trigger = {
					NOT = {
						culture = {
							has_cultural_pillar = heritage_calradian
						}
					}
				}
				desc = ck_imperial_events.0021.desc.b
			}
		}
	}
	theme = ck_imperial
	right_portrait = {
		character = scope:emperor
		animation = personality_bold
	}
	override_background = { reference = throne_room_mediterranean }
	
	immediate = {
		play_music_cue = "mx_ck_calradian_war"
		title:e_calradian_empire.holder = {
			save_scope_as = emperor
		}
	}

	option = {
		name = ck_imperial_events.0021.a # for calradians
		trigger = {
			culture = {
				has_cultural_pillar = heritage_calradian
			}
		}
	}
	option = {
		name = ck_imperial_events.0021.b # for non-calradians
		trigger = {
			NOT = {
				culture = {
					has_cultural_pillar = heritage_calradian
				}
			}
		}
	}
	
}
ck_imperial_events.0022 = { ### Calradian Empire Restored - for claimants 
	type = character_event
	title = ck_imperial_events.0022.t
	desc = ck_imperial_events.0022.desc
	theme = ck_imperial
	right_portrait = {
		character = scope:emperor
		animation = personality_bold
	}
	override_background = { reference = throne_room_mediterranean }
	
	immediate = {
		play_music_cue = "mx_ck_calradian_war"
		title:e_calradian_empire.holder = {
			save_scope_as = emperor
		}
	}
	option = { #I will never give up fight for MY Empire!
		name = ck_imperial_events.0022.a
		
		save_scope_as = claimant_loc
		hidden_effect = {
			scope:emperor = {
				send_interface_message = {
					type = send_interface_message_bad
					title = refuses_to_submit_title
					custom_tooltip = refuses_to_submit_desc
					right_icon = root
				}
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				add = 500
				has_trait = ambitious
			}
			modifier = {
				add = -500
				has_trait = craven
			}
			modifier = {
				add = -50
				has_trait = calm
			}
			modifier = {
				add = -50
				has_trait = just
			}
			modifier = {
				add = -50
				has_trait = humble
			}
			modifier = {
				add = -50
				has_trait = content
			}
			modifier = {
				add = -50
				has_trait = lazy
			}
		}
	}
	option = { #There is honor in recognizing one's defeat. I submit to our Emperor
		name = ck_imperial_events.0022.b
		
		trigger = {
			scope:emperor = {
				is_female = no
			}
		}
		
		custom_tooltip = you_will_become_vassal_tt
		custom_tooltip = every_imperial_title_destroyed_tt
		hidden_effect = {
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = change
			}
			every_vassal = {
				change_liege = {
					liege = title:e_calradian_empire.holder
					change = scope:change
				}
			}
			every_held_title = {
				limit = {
					tier = tier_empire
				}
				holder = {
					destroy_title = prev
				}
			}
			change_liege = {
				liege = scope:emperor
				change = scope:change
			}
			resolve_title_and_vassal_change = scope:change
			save_scope_as = submitemperor
			scope:emperor = {
				trigger_event = ck_imperial_events.0023
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				add = -500
				has_trait = ambitious
			}
			modifier = {
				add = -50
				has_trait = arrogant
			}
			modifier = {
				add = -50
				has_trait = callous
			}
			modifier = {
				add = -50
				has_trait = vengeful
			}
			modifier = {
				add = -50
				has_trait = stubborn
			}
		}
	}
	option = { #There is honor in recognizing one's defeat. I submit to our Empress
		name = ck_imperial_events.0022.b.f
		
		trigger = {
			scope:emperor = {
				is_female = yes
			}
		}
		custom_tooltip = you_will_become_vassal_tt
		custom_tooltip = every_imperial_title_destroyed_tt
		hidden_effect = {
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = change
			}
			every_vassal = {
				change_liege = {
					liege = title:e_calradian_empire.holder
					change = scope:change
				}
			}
			every_held_title = {
				limit = {
					tier = tier_empire
				}
				holder = {
					destroy_title = prev
				}
			}
			change_liege = {
				liege = scope:emperor
				change = scope:change
			}
			resolve_title_and_vassal_change = scope:change
			save_scope_as = submitemperor
			scope:emperor = {
				trigger_event = ck_imperial_events.0023
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				add = -500
				has_trait = ambitious
			}
			modifier = {
				add = -50
				has_trait = arrogant
			}
			modifier = {
				add = -50
				has_trait = callous
			}
			modifier = {
				add = -50
				has_trait = vengeful
			}
			modifier = {
				add = -50
				has_trait = stubborn
			}
		}
	}
}
ck_imperial_events.0023 = { ### Claimant submits
	type = character_event
	title = ck_imperial_events.0023.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					is_female = yes
				}
				desc = ck_imperial_events.0023.desc.f
			}
			desc = ck_imperial_events.0023.desc
		}
	}
	theme = ck_imperial
	right_portrait = {
		character = root
		animation = war_over_win
	}
	left_portrait = {
		character = scope:submitemperor
		animation = throne_room_bow_3
	}
	override_background = { reference = throne_room_mediterranean }


	option = { #Now serve me faithfully
		name = ck_imperial_events.0023.a
	}
	option = { #But you were a traitor, weren't you?
		name = ck_imperial_events.0023.b
		trigger = {
			OR = {
				has_trait = callous
				has_trait = wrathful
				has_trait = deceitful
				has_trait = sadistic
			}
		}
		add_prestige = major_prestige_loss
		add_character_modifier = {
			modifier = ck_dishonorable_modifier 
			years = 2
		}
		imprison_character_effect = {
			TARGET = scope:submitemperor
			IMPRISONER = root
		}
		ai_chance = {
			base = 0
		}
	}
}
ck_imperial_events.0024 = { ### Claimant deposed
	type = character_event
	title = ck_imperial_events.0024.t
	desc = ck_imperial_events.0024.desc
	theme = ck_imperial
	right_portrait = {
		character = root
		animation = war_over_win
	}
	left_portrait = {
		character = scope:defender
		animation = throne_room_kneel_1
	}
	override_background = { reference = throne_room_mediterranean }
	
	immediate = {
		capital_barony = {
			save_scope_as = stolica
		}
	}


	option = { #keep locked
		name = ck_imperial_events.0024.a
		custom_tooltip = unification_keep_locked_tt
	}
	option = { #kill
		name = ck_imperial_events.0024.b
		scope:defender = {
			death = {
				killer = root
				death_reason = death_execution
			}
		}
		add_character_modifier = {
			modifier = ck_honor_in_question_modifier
			years = 2
		}
	}
}
ck_imperial_events.0025 = { ### Accepted invitation to imperial expedition
	type = letter_event
	opening = {
		desc = {
			first_valid = {
				triggered_desc = {
					trigger = {
						scope:recipient = {
							opinion = {
								target = scope:actor
								value >= 40
							}
						}
					}
					desc = ck_imperial_events.0002.opening.a
				}
				desc = ck_imperial_events.0002.opening
			}
		}
	}
	sender = scope:recipient
	desc = ck_imperial_events.0025.desc
	option = {
		name = ck_imperial_events.0025.a
	}
}
ck_imperial_events.0026 = { ### Emperor granted promised title
	type = letter_event
	opening = {
		desc = {
			first_valid = {
				triggered_desc = {
					trigger = {
						scope:letter_sender = {
							opinion = {
								target = root
								value >= 40
							}
						}
					}
					desc = ck_imperial_events.0002.opening.a
				}
				desc = ck_imperial_events.0002.opening
			}
		}
	}
	sender = scope:letter_sender
	desc = ck_imperial_events.0026.desc
	option = {
		name = ck_imperial_events.0026.a
		add_prestige = 15
	}
}
ck_imperial_events.0027 = { ### Control event for vassals with promised lands
	hidden = yes
	type = character_event
	
	trigger = {
		has_character_flag = was_promised_title_expedition
	}
	
	option = {
		save_scope_as = angry_vassal
		top_liege = {
			trigger_event = ck_imperial_events.0028
		}
	}
}
ck_imperial_events.0028 = { ### Vassal didn't receive promised lands
	type = letter_event
	opening = {
		desc = {
			first_valid = {
				triggered_desc = {
					trigger = {
						scope:angry_vassal = {
							opinion = {
								target = root
								value >= 40
							}
						}
					}
					desc = ck_imperial_events.0002.opening
				}
				desc = ck_imperial_events.0002.opening
			}
		}
	}
	
	sender = scope:angry_vassal
	desc = ck_imperial_events.0028.desc
	option = {
		name = ck_imperial_events.0028.a
		add_legitimacy = -50
		add_prestige = major_prestige_loss
		add_tyranny = 15
		scope:angry_vassal = {
			add_opinion = {
				modifier = broken_promise_expedition_modifier
				years = 10
				target = root
			}
		}
		hidden_effect = {
			every_vassal_or_below = {
				remove_character_flag = was_promised_title_expedition
				if = {
					limit = {
						has_character_modifier = is_promised_new_title_modifier
					}
					remove_character_modifier = is_promised_new_title_modifier
				}
			}
			remove_character_flag = promised_title_expedition
		}
	}
	
}
ck_imperial_events.0029 = { ### Latifundium reconstruction
	type = character_event
	title = ck_imperial_events.0029.t
	desc = ck_imperial_events.0029.desc
	theme = ck_imperial
	right_portrait = {
		character = root
		animation = thinking
	}
	
	override_background = { reference = ck_senate }
	
	trigger = {
		NOT = {
			has_character_flag = recent_senate_event
		}
		any_sub_realm_county = {
			NOR = {
				has_county_modifier = burnt_latifundium_modifier
				has_county_modifier = reconstructed_latifundium_modifier
				has_county_modifier = veteran_grants_modifier
			}
		}
	}
	
	immediate = {
		random_sub_realm_county = {
			limit = {
				NOR = {
					has_county_modifier = burnt_latifundium_modifier
					has_county_modifier = reconstructed_latifundium_modifier
					has_county_modifier = veteran_grants_modifier
				}
			}
			save_scope_as = latifundium_county
		}
		add_character_flag = {
			flag = recent_senate_event
			years = 1
		}
	}
	
	option = { # Imperial coffers are for Imperial matters only
		name = ck_imperial_events.0029.a
		
		
		
		custom_tooltip = {
			text = will_please_royalists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_royalist
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
		custom_tooltip = {
			text = will_please_populists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_populist
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
		custom_tooltip = {
			text = will_upset_oligarchs
			every_vassal_or_below = {
				limit = {
					has_trait = ck_oligarch
				}
				add_opinion = {
					modifier = expedition_upset_minor
					target = root
					years = 2
				}
			}
		}
		
		scope:latifundium_county = {
			add_county_modifier = {
				modifier = burnt_latifundium_modifier
				years = 3
			}
		}
		
		
		ai_chance = {
			base = 20
			modifier = {
				add = 50
				OR = {
					has_trait = ck_royalist
					has_trait = ck_populist
				}
			}
		}
	}
	option = { # Empire will fund the reconstruction 
		name = ck_imperial_events.0029.b
		
		
		
		custom_tooltip = {
			text = will_upset_royalists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_royalist
				}
				add_opinion = {
					modifier = expedition_upset_minor
					target = root
					years = 2
				}
			}
		}
		custom_tooltip = {
			text = will_upset_populists.m
			every_vassal_or_below = {
				limit = {
					has_trait = ck_populist
				}
				add_opinion = {
					modifier = expedition_upset_major
					target = root
					years = 2
				}
			}
		}
		custom_tooltip = {
			text = will_please_oligarchs
			every_vassal_or_below = {
				limit = {
					has_trait = ck_oligarch
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
		
		remove_short_term_gold = 200
		
		scope:latifundium_county = {
			add_county_modifier = {
				modifier = reconstructed_latifundium_modifier
				years = 3
			}
		}
		
		ai_chance = {
			base = 20
			modifier = {
				add = -20
				gold <= 200
			}
			modifier = {
				add = 100
				has_trait = ck_oligarch
			}
			modifier = {
				add = -100
				has_trait = ck_populist
			}
		}
	}
	option = { # He will receive funds only if he grants portion of his lands to legionary veterans
		name = ck_imperial_events.0029.c
		
		
		
		custom_tooltip = {
			text = will_please_militarists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_militarist
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
		custom_tooltip = {
			text = will_upset_oligarchs
			every_vassal_or_below = {
				limit = {
					has_trait = ck_oligarch
				}
				add_opinion = {
					modifier = expedition_upset_minor
					target = root
					years = 2
				}
			}
		}
		
		remove_short_term_gold = 200
		scope:latifundium_county = {
			add_county_modifier = {
				modifier = veteran_grants_modifier
				years = 3
			}
		}
		
		
		ai_chance = {
			base = 20
			modifier = {
				add = -20
				gold <= 200
			}
			modifier = {
				add = 200
				has_trait = ck_militarist
			}
		}
	}
}
ck_imperial_events.0030 = { ### Poverty of <county> / Starving plebeians
	type = character_event
	title = ck_imperial_events.0030.t
	desc = ck_imperial_events.0030.desc
	theme = ck_imperial
	right_portrait = {
		character = root
		animation = thinking
	}
	
	override_background = { reference = ck_senate }
	
	trigger = {
		NOT = {
			has_character_flag = recent_senate_event
		}
		any_sub_realm_county = {
			NOR = {
				has_county_modifier = plebeian_starvation_modifier
				has_county_modifier = fed_plebeians_modifier
			}
		}
	}
	
	immediate = {
		random_sub_realm_county = {
			limit = {
				NOR = {
					has_county_modifier = plebeian_starvation_modifier
					has_county_modifier = fed_plebeians_modifier
				}
			}
			save_scope_as = poverty_county
		}
		add_character_flag = {
			flag = recent_senate_event
			years = 1
		}
	}
	
	option = { # We cannot afford such expenses
		name = ck_imperial_events.0030.a
		
		
		custom_tooltip = {
			text = will_upset_populists.m
			every_vassal_or_below = {
				limit = {
					has_trait = ck_populist
				}
				add_opinion = {
					modifier = expedition_upset_major
					target = root
					years = 2
				}
			}
		}
		add_legitimacy = -35
		scope:poverty_county = {
			add_county_modifier = {
				modifier = plebeian_starvation_modifier
				years = 3
			}
		}

		
		ai_chance = {
			base = 10
			modifier = {
				add = 50
				has_trait = greedy
			}
			modifier = {
				add = -200
				has_trait = ck_populist
			}
			modifier = {
				add = -50
				OR = {
					has_trait = generous
					has_trait = compassionate
				}
			}
		}

	}
	option = { # I won’t allow starvation in my Empire
		name = ck_imperial_events.0030.b
		
		
		
		custom_tooltip = {
			text = will_please_populists
			every_vassal_or_below = {
				limit = {
					has_trait = ck_populist
				}
				add_opinion = {
					modifier = expedition_pleased_minor
					target = root
					years = 2
				}
			}
		}
		add_legitimacy = 30
		remove_short_term_gold = 200
		scope:poverty_county = {
			add_county_modifier = {
				modifier = fed_plebeians_modifier
				years = 3
			}
		}

		
		ai_chance = {
			base = 30
			modifier = {
				add = -100
				gold <= 200
			}
			modifier = {
				add = 200
				has_trait = ck_populist
			}
		}

	}
	
}
ck_imperial_events.0031 = { ### Magisterial Corruption
	type = character_event
	title = ck_imperial_events.0031.t
	desc = ck_imperial_events.0031.desc
	theme = ck_imperial
	right_portrait = {
		character = root
		animation = thinking
	}
	
	override_background = { reference = ck_senate }
	
	trigger = {
		NOT = {
			has_character_flag = recent_senate_event
		}
	}
	
	immediate = {
		add_character_flag = {
			flag = recent_senate_event
			years = 1
		}
	}
	
	option = { # Death is the only just answer for corruption
		name = ck_imperial_events.0031.a

		add_legitimacy = 15
		custom_tooltip = {
            text = will_please_royalists
            every_vassal_or_below = {
                limit = {
                    has_trait = ck_royalist
                }
                add_opinion = {
                    modifier = expedition_pleased_minor
                    target = root
                    years = 2
                }
            }
        }
		custom_tooltip = {
            text = will_upset_oligarchs
            every_vassal_or_below = {
                limit = {
                    has_trait = ck_oligarch
                }
                add_opinion = {
                    modifier = expedition_upset_minor
                    target = root
                    years = 2
                }
            }
        }
		stress_impact = {
			forgiving = medium_stress_impact_gain
			compassionate = medium_stress_impact_gain
		}
		ai_chance = {
			base = 20
			modifier = {
				add = -50
				has_trait = ck_oligarch
			}
			modifier = {
				add = 50
				has_trait = ck_royalist
			}
			modifier = {
				add = 30
				OR = {
					has_trait = sadistic
					has_trait = vengeful
					has_trait = just
					has_trait = callous
				}
			}
			modifier = {
				add = -100
				OR = {
					has_trait = forgiving
					has_trait = compassionate
				}
			}
			modifier = {
				add = -15
				has_trait = arbitrary
			}
		}
	}

	option = { # Grant him pardon
		name = ck_imperial_events.0031.b

		add_legitimacy = -15
		custom_tooltip = {
            text = will_please_oligarchs
            every_vassal_or_below = {
                limit = {
                    has_trait = ck_oligarch
                }
                add_opinion = {
                    modifier = expedition_pleased_minor
                    target = root
                    years = 2
                }
            }
        }
		custom_tooltip = {
            text = will_upset_royalists
            every_vassal_or_below = {
                limit = {
                    has_trait = ck_royalist
                }
                add_opinion = {
                    modifier = expedition_upset_minor
                    target = root
                    years = 2
                }
            }
        }
		stress_impact = {
			just = minor_stress_impact_gain
		}
		ai_chance = {
			base = 20
			modifier = {
				add = -50
				has_trait = ck_royalist
			}
			modifier = {
				add = 50
				has_trait = ck_oligarch
			}
			modifier = {
				add = 10
				has_trait = forgiving
			}
			modifier = {
				add = -100
				has_trait = just
			}
		}
	}
	option = { # Grant him pardon... for a price
		name = ck_imperial_events.0031.c

		add_tyranny = 10
		add_gold = 280
		add_legitimacy = -30
		custom_tooltip = {
            text = will_please_oligarchs
            every_vassal_or_below = {
                limit = {
                    has_trait = ck_oligarch
                }
                add_opinion = {
                    modifier = expedition_pleased_minor
                    target = root
                    years = 2
                }
            }
        }
		custom_tooltip = {
            text = will_upset_royalists.m
            every_vassal_or_below = {
                limit = {
                    has_trait = ck_royalist
                }
                add_opinion = {
                    modifier = expedition_upset_major
                    target = root
                    years = 2
                }
            }
        }
		stress_impact = {
			just = medium_stress_impact_gain
			temperate = major_stress_impact_gain
			greedy = medium_stress_impact_loss
		}
		ai_chance = {
			base = 0
			modifier = {
				add = -100
				has_trait = ck_royalist
			}
			modifier = {
				add = 100
				has_trait = greedy
			}
			modifier = {
				add = -100
				has_trait = just
			}
		}

	}
	
}
ck_imperial_events.0032 = { ### Brawl in the Senate
	type = character_event
	title = ck_imperial_events.0032.t
	desc = ck_imperial_events.0032.desc
	theme = ck_imperial
	lower_center_portrait = {
		character = root
	}
	left_portrait = {
		character = scope:left_side_portrait_1
		animation = anger
	}
	lower_left_portrait = {
		character = scope:left_side_portrait_2
	}
	right_portrait = {
		character = scope:right_side_portrait_1
		animation = anger
	}
	lower_right_portrait = {
		character = scope:right_side_portrait_2
	}
	
	override_background = { reference = ck_senate }
	
	trigger = {
		NOR = {
			has_character_flag = recent_senate_event
			has_character_flag = recent_brawl_senate_event
		}
		OR = {
			AND = { # Militarists vs Oligarchs
				any_vassal = {
					count >= 2
					has_trait = ck_militarist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
				any_vassal = {
					count >= 2
					has_trait = ck_oligarch
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
			}
			AND = { # Populists vs Oligarchs
				any_vassal = {
					count >= 2
					has_trait = ck_populist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
				any_vassal = {
					count >= 2
					has_trait = ck_oligarch
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
			}
			AND = { # Royalists vs Oligarchs
				any_vassal = {
					count >= 2
					has_trait = ck_royalist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
				any_vassal = {
					count >= 2
					has_trait = ck_oligarch
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
			}
			AND = { # Royalists vs Populists
				any_vassal = {
					count >= 2
					has_trait = ck_royalist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
				any_vassal = {
					count >= 2
					has_trait = ck_populist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
			}
			AND = { # Royalists vs Militarists
				any_vassal = {
					count >= 2
					has_trait = ck_royalist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
				any_vassal = {
					count >= 2
					has_trait = ck_militarist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
			}
		}
	}
	
	immediate = {
		add_character_flag = {
			flag = recent_senate_event
			years = 1
		}
		add_character_flag = {
			flag = recent_brawl_senate_event
			years = 3
		}
		if = { # For militarist Emperor
			limit = {
				has_trait = ck_militarist # Check your faction
				any_vassal = { # Check if there are vassals from your faction
					count >= 2
					has_trait = ck_militarist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
				OR = { # Check potential faction enemies
					any_vassal = {
						count >= 2
						has_trait = ck_royalist
						is_capable_adult = yes
						is_imprisoned = no
						is_at_war = no
						is_ai = yes
						NOT = {
							has_trait = calm
						}
					}
					any_vassal = {
						count >= 2
						has_trait = ck_oligarch
						is_capable_adult = yes
						is_imprisoned = no
						is_at_war = no
						is_ai = yes
						NOT = {
							has_trait = calm
						}
					}
				}
			}
			random_vassal = {
				limit = {
					has_trait = ck_militarist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOR = {
						has_trait = calm
						has_character_flag = takes_part_in_brawl
					}
				}
				add_character_flag = {
					flag = takes_part_in_brawl
					days = 2
				}
				save_scope_as = right_side_portrait_1
			}
			random_vassal = {
				limit = {
					has_trait = ck_militarist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOR = {
						has_trait = calm
						has_character_flag = takes_part_in_brawl
					}
				}
				add_character_flag = {
					flag = takes_part_in_brawl
					days = 2
				}
				save_scope_as = right_side_portrait_2
			}
			random_list = {
				2 = {
					modifier = {
						factor = 0
						NOT = {
							any_vassal = {
								count >= 2
								has_trait = ck_royalist
								is_capable_adult = yes
								is_imprisoned = no
								is_at_war = no
								is_ai = yes
								NOT = {
									has_trait = calm
								}
							}
						}
					}
					random_vassal = {
						limit = {
							has_trait = ck_royalist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_1
					}
					random_vassal = {
						limit = {
							has_trait = ck_royalist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_2
					}
				}
				2 = {
					modifier = {
						factor = 0
						NOT = {
							any_vassal = {
								count >= 2
								has_trait = ck_oligarch
								is_capable_adult = yes
								is_imprisoned = no
								is_at_war = no
								is_ai = yes
								NOT = {
									has_trait = calm
								}
							}
						}
					}
					random_vassal = {
						limit = {
							has_trait = ck_oligarch
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_1
					}
					random_vassal = {
						limit = {
							has_trait = ck_oligarch
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_2
					}
				}
			}
		}
		else_if = { # For oligarch Emperor
			limit = {
				has_trait = ck_oligarch # Check your faction
				any_vassal = { # Check if there are vassals from your faction
					count >= 2
					has_trait = ck_oligarch
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
				OR = { # Check potential faction enemies
					any_vassal = {
						count >= 2
						has_trait = ck_militarist
						is_capable_adult = yes
						is_imprisoned = no
						is_at_war = no
						is_ai = yes
						NOT = {
							has_trait = calm
						}
					}
					any_vassal = {
						count >= 2
						has_trait = ck_royalist
						is_capable_adult = yes
						is_imprisoned = no
						is_at_war = no
						is_ai = yes
						NOT = {
							has_trait = calm
						}
					}
					any_vassal = {
						count >= 2
						has_trait = ck_populist
						is_capable_adult = yes
						is_imprisoned = no
						is_at_war = no
						is_ai = yes
						NOT = {
							has_trait = calm
						}
					}
				}
			}
			random_vassal = {
				limit = {
					has_trait = ck_oligarch
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOR = {
						has_trait = calm
						has_character_flag = takes_part_in_brawl
					}
				}
				add_character_flag = {
					flag = takes_part_in_brawl
					days = 2
				}
				save_scope_as = right_side_portrait_1
			}
			random_vassal = {
				limit = {
					has_trait = ck_oligarch
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOR = {
						has_trait = calm
						has_character_flag = takes_part_in_brawl
					}
				}
				add_character_flag = {
					flag = takes_part_in_brawl
					days = 2
				}
				save_scope_as = right_side_portrait_2
			}
			random_list = {
				2 = {
					modifier = {
						factor = 0
						NOT = {
							any_vassal = {
								count >= 2
								has_trait = ck_royalist
								is_capable_adult = yes
								is_imprisoned = no
								is_at_war = no
								is_ai = yes
								NOT = {
									has_trait = calm
								}
							}
						}
					}
					random_vassal = {
						limit = {
							has_trait = ck_royalist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_1
					}
					random_vassal = {
						limit = {
							has_trait = ck_royalist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_2
					}
				}
				2 = {
					modifier = {
						factor = 0
						NOT = {
							any_vassal = {
								count >= 2
								has_trait = ck_militarist
								is_capable_adult = yes
								is_imprisoned = no
								is_at_war = no
								is_ai = yes
								NOT = {
									has_trait = calm
								}
							}
						}
					}
					random_vassal = {
						limit = {
							has_trait = ck_militarist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_1
					}
					random_vassal = {
						limit = {
							has_trait = ck_militarist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_2
					}
				}
				2 = {
					modifier = {
						factor = 0
						NOT = {
							any_vassal = {
								count >= 2
								has_trait = ck_populist
								is_capable_adult = yes
								is_imprisoned = no
								is_at_war = no
								is_ai = yes
								NOT = {
									has_trait = calm
								}
							}
						}
					}
					random_vassal = {
						limit = {
							has_trait = ck_populist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_1
					}
					random_vassal = {
						limit = {
							has_trait = ck_populist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_2
					}
				}
			}
		}
		else_if = { # For royalist Emperor
			limit = {
				has_trait = ck_royalist # Check your faction
				any_vassal = { # Check if there are vassals from your faction
					count >= 2
					has_trait = ck_royalist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
				OR = { # Check potential faction enemies
					any_vassal = {
						count >= 2
						has_trait = ck_militarist
						is_capable_adult = yes
						is_imprisoned = no
						is_at_war = no
						is_ai = yes
						NOT = {
							has_trait = calm
						}
					}
					any_vassal = {
						count >= 2
						has_trait = ck_oligarch
						is_capable_adult = yes
						is_imprisoned = no
						is_at_war = no
						is_ai = yes
						NOT = {
							has_trait = calm
						}
					}
					any_vassal = {
						count >= 2
						has_trait = ck_populist
						is_capable_adult = yes
						is_imprisoned = no
						is_at_war = no
						is_ai = yes
						NOT = {
							has_trait = calm
						}
					}
				}
			}
			random_vassal = {
				limit = {
					has_trait = ck_royalist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOR = {
						has_trait = calm
						has_character_flag = takes_part_in_brawl
					}
				}
				add_character_flag = {
					flag = takes_part_in_brawl
					days = 2
				}
				save_scope_as = right_side_portrait_1
			}
			random_vassal = {
				limit = {
					has_trait = ck_royalist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOR = {
						has_trait = calm
						has_character_flag = takes_part_in_brawl
					}
				}
				add_character_flag = {
					flag = takes_part_in_brawl
					days = 2
				}
				save_scope_as = right_side_portrait_2
			}
			random_list = {
				2 = {
					modifier = {
						factor = 0
						NOT = {
							any_vassal = {
								count >= 2
								has_trait = ck_oligarch
								is_capable_adult = yes
								is_imprisoned = no
								is_at_war = no
								is_ai = yes
								NOT = {
									has_trait = calm
								}
							}
						}
					}
					random_vassal = {
						limit = {
							has_trait = ck_oligarch
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_1
					}
					random_vassal = {
						limit = {
							has_trait = ck_oligarch
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_2
					}
				}
				2 = {
					modifier = {
						factor = 0
						NOT = {
							any_vassal = {
								count >= 2
								has_trait = ck_militarist
								is_capable_adult = yes
								is_imprisoned = no
								is_at_war = no
								is_ai = yes
								NOT = {
									has_trait = calm
								}
							}
						}
					}
					random_vassal = {
						limit = {
							has_trait = ck_militarist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_1
					}
					random_vassal = {
						limit = {
							has_trait = ck_militarist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_2
					}
				}
				2 = {
					modifier = {
						factor = 0
						NOT = {
							any_vassal = {
								count >= 2
								has_trait = ck_populist
								is_capable_adult = yes
								is_imprisoned = no
								is_at_war = no
								is_ai = yes
								NOT = {
									has_trait = calm
								}
							}
						}
					}
					random_vassal = {
						limit = {
							has_trait = ck_populist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_1
					}
					random_vassal = {
						limit = {
							has_trait = ck_populist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_2
					}
				}
			}
		}
		else_if = { # For populist Emperor
			limit = {
				has_trait = ck_populist # Check your faction
				any_vassal = { # Check if there are vassals from your faction
					count >= 2
					has_trait = ck_populist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOT = {
						has_trait = calm
					}
				}
				OR = { # Check potential faction enemies
					any_vassal = {
						count >= 2
						has_trait = ck_militarist
						is_capable_adult = yes
						is_imprisoned = no
						is_at_war = no
						is_ai = yes
						NOT = {
							has_trait = calm
						}
					}
					any_vassal = {
						count >= 2
						has_trait = ck_oligarch
						is_capable_adult = yes
						is_imprisoned = no
						is_at_war = no
						is_ai = yes
						NOT = {
							has_trait = calm
						}
					}
				}
			}
			random_vassal = {
				limit = {
					has_trait = ck_populist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOR = {
						has_trait = calm
						has_character_flag = takes_part_in_brawl
					}
				}
				add_character_flag = {
					flag = takes_part_in_brawl
					days = 2
				}
				save_scope_as = right_side_portrait_1
			}
			random_vassal = {
				limit = {
					has_trait = ck_populist
					is_capable_adult = yes
					is_imprisoned = no
					is_at_war = no
					is_ai = yes
					NOR = {
						has_trait = calm
						has_character_flag = takes_part_in_brawl
					}
				}
				add_character_flag = {
					flag = takes_part_in_brawl
					days = 2
				}
				save_scope_as = right_side_portrait_2
			}
			random_list = {
				2 = {
					modifier = {
						factor = 0
						NOT = {
							any_vassal = {
								count >= 2
								has_trait = ck_royalist
								is_capable_adult = yes
								is_imprisoned = no
								is_at_war = no
								is_ai = yes
								NOT = {
									has_trait = calm
								}
							}
						}
					}
					random_vassal = {
						limit = {
							has_trait = ck_royalist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_1
					}
					random_vassal = {
						limit = {
							has_trait = ck_royalist
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_2
					}
				}
				2 = {
					modifier = {
						factor = 0
						NOT = {
							any_vassal = {
								count >= 2
								has_trait = ck_oligarch
								is_capable_adult = yes
								is_imprisoned = no
								is_at_war = no
								is_ai = yes
								NOT = {
									has_trait = calm
								}
							}
						}
					}
					random_vassal = {
						limit = {
							has_trait = ck_oligarch
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_1
					}
					random_vassal = {
						limit = {
							has_trait = ck_oligarch
							is_capable_adult = yes
							is_imprisoned = no
							is_at_war = no
							is_ai = yes
							NOR = {
								has_trait = calm
								has_character_flag = takes_part_in_brawl
							}
						}
						add_character_flag = {
							flag = takes_part_in_brawl
							days = 2
						}
						save_scope_as = left_side_portrait_2
					}
				}
			}
		}
	}
	
	option = { # Bring in the guards!
		name = ck_imperial_events.0032.a
		
		add_prestige = minor_prestige_gain
		add_legitimacy = 7
		
		random_list = { ## Some brawlers will get hurt
			2 = { }
			3 = { 
				custom_tooltip = {
					text = some_brawlers_will_get_hurt_tt
					random_list = {
						2 = {
							random_vassal = {
								limit = {
									has_character_flag = takes_part_in_brawl
									NOT = {
										has_character_flag = injured_in_brawl
									}
								}
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
						}
						2 = {
							random_vassal = {
								limit = {
									has_character_flag = takes_part_in_brawl
									NOT = {
										has_character_flag = injured_in_brawl
									}
								}
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
							random_vassal = {
								limit = {
									has_character_flag = takes_part_in_brawl
									NOT = {
										has_character_flag = injured_in_brawl
									}
								}
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
						}
						2 = {
							random_vassal = {
								limit = {
									has_character_flag = takes_part_in_brawl
									NOT = {
										has_character_flag = injured_in_brawl
									}
								}
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
							random_vassal = {
								limit = {
									has_character_flag = takes_part_in_brawl
									NOT = {
										has_character_flag = injured_in_brawl
									}
								}
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
							random_vassal = {
								limit = {
									has_character_flag = takes_part_in_brawl
									NOT = {
										has_character_flag = injured_in_brawl
									}
								}
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
						}
					}
				}
			}
		}
		custom_tooltip = {
			text = will_upset_brawlers_tt
			every_vassal = {
				limit = {
					has_character_flag = takes_part_in_brawl
				}
				add_opinion = {
					modifier = called_guards_on_me_modifier
					years = 3
					target = root
				}
			}
		}
		custom_tooltip = {
			text = will_upset_brawling_factions_tt
			if = { # Militarists
				limit = {
					scope:right_side_portrait_1 = {
						has_trait = ck_militarist
					}
				}
				every_vassal = {
					limit = {
						has_trait = ck_militarist
					}
					add_opinion = {
						modifier = senate_brawl_faction_modifier
						years = 2
						target = root
					}
				}
			}
			if = { # Populists
				limit = {
					scope:right_side_portrait_1 = {
						has_trait = ck_populist
					}
				}
				every_vassal = {
					limit = {
						has_trait = ck_populist
					}
					add_opinion = {
						modifier = senate_brawl_faction_modifier
						years = 2
						target = root
					}
				}
			}
			if = { # Royalists
				limit = {
					scope:right_side_portrait_1 = {
						has_trait = ck_royalist
					}
				}
				every_vassal = {
					limit = {
						has_trait = ck_royalist
					}
					add_opinion = {
						modifier = senate_brawl_faction_modifier
						years = 2
						target = root
					}
				}
			}
			if = { # Oligarchs
				limit = {
					scope:right_side_portrait_1 = {
						has_trait = ck_oligarch
					}
				}
				every_vassal = {
					limit = {
						has_trait = ck_oligarch
					}
					add_opinion = {
						modifier = senate_brawl_faction_modifier
						years = 2
						target = root
					}
				}
			}
			if = { # Militarists
				limit = {
					scope:left_side_portrait_1 = {
						has_trait = ck_militarist
					}
				}
				every_vassal = {
					limit = {
						has_trait = ck_militarist
					}
					add_opinion = {
						modifier = senate_brawl_faction_modifier
						years = 2
						target = root
					}
				}
			}
			if = { # Populists
				limit = {
					scope:left_side_portrait_1 = {
						has_trait = ck_populist
					}
				}
				every_vassal = {
					limit = {
						has_trait = ck_populist
					}
					add_opinion = {
						modifier = senate_brawl_faction_modifier
						years = 2
						target = root
					}
				}
			}
			if = { # Royalists
				limit = {
					scope:left_side_portrait_1 = {
						has_trait = ck_royalist
					}
				}
				every_vassal = {
					limit = {
						has_trait = ck_royalist
					}
					add_opinion = {
						modifier = senate_brawl_faction_modifier
						years = 2
						target = root
					}
				}
			}
			if = { # Oligarchs
				limit = {
					scope:left_side_portrait_1 = {
						has_trait = ck_oligarch
					}
				}
				every_vassal = {
					limit = {
						has_trait = ck_oligarch
					}
					add_opinion = {
						modifier = senate_brawl_faction_modifier
						years = 2
						target = root
					}
				}
			}
		}
		
		ai_chance = {
			base = 30
			modifier = {
				add = 30
				has_trait = just
			}
		}
	}
	option = { # Guards, stop the <faction>!
		name = {
			trigger = {
				scope:left_side_portrait_1 = {
					has_trait = ck_militarist
				}
			}
			text = ck_imperial_events.0032.b.militarist
		}
		name = {
			trigger = {
				scope:left_side_portrait_1 = {
					has_trait = ck_royalist
				}
			}
			text = ck_imperial_events.0032.b.royalist
		}
		name = {
			trigger = {
				scope:left_side_portrait_1 = {
					has_trait = ck_populist
				}
			}
			text = ck_imperial_events.0032.b.populist
		}
		name = {
			trigger = {
				scope:left_side_portrait_1 = {
					has_trait = ck_oligarch
				}
			}
			text = ck_imperial_events.0032.b.oligarch
		}
		add_prestige = minor_piety_gain
		add_legitimacy = -10
		random_list = { ## Some brawlers will get hurt
			2 = { }
			3 = { 
				custom_tooltip = {
					text = some_brawlers_will_get_hurt_tt
					random_list = {
						2 = {
							scope:left_side_portrait_1 = {
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
						}
						2 = {
							scope:left_side_portrait_1 = {
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
							scope:left_side_portrait_2 = {
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
						}
					}
				}
			}
		}
		custom_tooltip = {
			text = will_upset_brawlers_opposing_faction_tt
			scope:left_side_portrait_1 = {
				add_opinion = {
					modifier = called_guards_on_me_modifier
					years = 4
					target = root
				}
			}
			scope:left_side_portrait_2 = {
				add_opinion = {
					modifier = called_guards_on_me_modifier
					years = 4
					target = root
				}
			}
		}
		if = {
			limit = {
				scope:left_side_portrait_1 = {
					has_trait = ck_militarist
				}
			}
			custom_tooltip = {
				text = will_upset_militarists.m
				every_vassal = {
					limit = {
						has_trait = ck_militarist
					}
					add_opinion = {
						modifier = expedition_upset_major
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				scope:left_side_portrait_1 = {
					has_trait = ck_oligarch
				}
			}
			custom_tooltip = {
				text = will_upset_oligarchs.m
				every_vassal = {
					limit = {
						has_trait = ck_oligarch
					}
					add_opinion = {
						modifier = expedition_upset_major
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				scope:left_side_portrait_1 = {
					has_trait = ck_populist
				}
			}
			custom_tooltip = {
				text = will_upset_populists.m
				every_vassal = {
					limit = {
						has_trait = ck_populist
					}
					add_opinion = {
						modifier = expedition_upset_major
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				scope:left_side_portrait_1 = {
					has_trait = ck_royalist
				}
			}
			custom_tooltip = {
				text = will_upset_royalists.m
				every_vassal = {
					limit = {
						has_trait = ck_royalist
					}
					add_opinion = {
						modifier = expedition_upset_major
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = ck_militarist
			}
			custom_tooltip = {
				text = will_please_militarists
				every_vassal = {
					limit = {
						has_trait = ck_militarist
					}
					add_opinion = {
						modifier = expedition_pleased_minor
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = ck_royalist
			}
			custom_tooltip = {
				text = will_please_royalists
				every_vassal = {
					limit = {
						has_trait = ck_royalist
					}
					add_opinion = {
						modifier = expedition_pleased_minor
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = ck_populist
			}
			custom_tooltip = {
				text = will_please_populists
				every_vassal = {
					limit = {
						has_trait = ck_populist
					}
					add_opinion = {
						modifier = expedition_pleased_minor
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = ck_oligarch
			}
			custom_tooltip = {
				text = will_please_oligarchs
				every_vassal = {
					limit = {
						has_trait = ck_oligarch
					}
					add_opinion = {
						modifier = expedition_pleased_minor
						target = root
						years = 2
					}
				}
			}
		}
		
		ai_chance = {
			base = 10
			modifier = {
				add = 80
				OR = {
					has_trait = arrogant
					has_trait = arbitrary
				}
			}
			modifier = {
				add = -30
				has_trait = just
			}
		}
	}
	option = { # Down with the <faction>!
		name = {
			trigger = {
				scope:left_side_portrait_1 = {
					has_trait = ck_militarist
				}
			}
			text = ck_imperial_events.0032.c.militarist
		}
		name = {
			trigger = {
				scope:left_side_portrait_1 = {
					has_trait = ck_royalist
				}
			}
			text = ck_imperial_events.0032.c.royalist
		}
		name = {
			trigger = {
				scope:left_side_portrait_1 = {
					has_trait = ck_populist
				}
			}
			text = ck_imperial_events.0032.c.populist
		}
		name = {
			trigger = {
				scope:left_side_portrait_1 = {
					has_trait = ck_oligarch
				}
			}
			text = ck_imperial_events.0032.c.oligarch
		}
		trigger = {
			NOT = {
				has_trait = craven
			}
		}
		custom_tooltip = will_join_the_brawl_tt
		add_legitimacy = -40
		duel = {
			skill = prowess
			target = scope:left_side_portrait_1
			50 = {
				show_chance = no
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = ck_imperial_events.0032.c.success
				add_prestige = medium_prestige_gain
				custom_tooltip = {
					text = brawler_might_get_hurt_brawl_tt
					random_list = {
						4 = {
							scope:left_side_portrait_1 = {
								add_trait = wounded_1
							}
						}
						1 = {
							scope:left_side_portrait_1 = {
								add_trait = wounded_2
							}
						}
					}
				}
			}
			50 = {
				show_chance = no
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = ck_imperial_events.0032.c.failure
				add_prestige = major_prestige_loss
				add_legitimacy = -100
				custom_tooltip = {
					text = you_might_get_hurt_brawl_tt
					random_list = {
						4 = {
							add_trait = wounded_1
						}
						1 = {
							add_trait = wounded_2
						}
					}
				}
			}
		}
		if = {
			limit = {
				scope:left_side_portrait_1 = {
					has_trait = ck_militarist
				}
			}
			custom_tooltip = {
				text = will_upset_militarists.m
				every_vassal = {
					limit = {
						has_trait = ck_militarist
					}
					add_opinion = {
						modifier = expedition_upset_major
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				scope:left_side_portrait_1 = {
					has_trait = ck_oligarch
				}
			}
			custom_tooltip = {
				text = will_upset_oligarchs.m
				every_vassal = {
					limit = {
						has_trait = ck_oligarch
					}
					add_opinion = {
						modifier = expedition_upset_major
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				scope:left_side_portrait_1 = {
					has_trait = ck_populist
				}
			}
			custom_tooltip = {
				text = will_upset_populists.m
				every_vassal = {
					limit = {
						has_trait = ck_populist
					}
					add_opinion = {
						modifier = expedition_upset_major
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				scope:left_side_portrait_1 = {
					has_trait = ck_royalist
				}
			}
			custom_tooltip = {
				text = will_upset_royalists.m
				every_vassal = {
					limit = {
						has_trait = ck_royalist
					}
					add_opinion = {
						modifier = expedition_upset_major
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = ck_militarist
			}
			custom_tooltip = {
				text = will_please_militarists.m
				every_vassal = {
					limit = {
						has_trait = ck_militarist
					}
					add_opinion = {
						modifier = expedition_pleased_major
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = ck_royalist
			}
			custom_tooltip = {
				text = will_please_royalists.m
				every_vassal = {
					limit = {
						has_trait = ck_royalist
					}
					add_opinion = {
						modifier = expedition_pleased_major
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = ck_populist
			}
			custom_tooltip = {
				text = will_please_populists.m
				every_vassal = {
					limit = {
						has_trait = ck_populist
					}
					add_opinion = {
						modifier = expedition_pleased_major
						target = root
						years = 2
					}
				}
			}
		}
		if = {
			limit = {
				has_trait = ck_oligarch
			}
			custom_tooltip = {
				text = will_please_oligarchs.m
				every_vassal = {
					limit = {
						has_trait = ck_oligarch
					}
					add_opinion = {
						modifier = expedition_pleased_major
						target = root
						years = 2
					}
				}
			}
		}
		
		ai_chance = {
			base = 0
			modifier = {
				add = 10
				has_trait = brave
			}
			modifier = {
				add = 40
				has_trait = wrathful
			}
		}
		stress_impact = {
			calm = major_stress_impact_gain
		}
	}
	option = { # Oh for Heaven's sake...
		name = ck_imperial_events.0032.d
		custom_tooltip = wait_for_brawl_subside_tt
		add_prestige = -50
		add_legitimacy = -10
		random_list = { ## Some brawlers will get hurt
			3 = { }
			2 = { 
				custom_tooltip = {
					text = some_brawlers_will_get_hurt_tt
					random_list = {
						2 = {
							random_vassal = {
								limit = {
									has_character_flag = takes_part_in_brawl
									NOT = {
										has_character_flag = injured_in_brawl
									}
								}
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
						}
						2 = {
							random_vassal = {
								limit = {
									has_character_flag = takes_part_in_brawl
									NOT = {
										has_character_flag = injured_in_brawl
									}
								}
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
							random_vassal = {
								limit = {
									has_character_flag = takes_part_in_brawl
									NOT = {
										has_character_flag = injured_in_brawl
									}
								}
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
						}
						2 = {
							random_vassal = {
								limit = {
									has_character_flag = takes_part_in_brawl
									NOT = {
										has_character_flag = injured_in_brawl
									}
								}
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
							random_vassal = {
								limit = {
									has_character_flag = takes_part_in_brawl
									NOT = {
										has_character_flag = injured_in_brawl
									}
								}
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
							random_vassal = {
								limit = {
									has_character_flag = takes_part_in_brawl
									NOT = {
										has_character_flag = injured_in_brawl
									}
								}
								random_list = {
									4 = { 
										add_trait = wounded_1
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
									1 = {
										add_trait = wounded_2
										add_character_flag = {
											flag = injured_in_brawl
											days = 2
										}
									}
								}
							}
						}
					}
				}
			}
		}
		
		ai_chance = {
			base = 15
			modifier = {
				add = 80
				has_trait = calm
			}
		}
	}

}
ck_imperial_events.0033 = { ### Vulgar Festivities
	type = character_event
	title = ck_imperial_events.0033.t
	desc = ck_imperial_events.0033.desc
	theme = ck_imperial

	trigger = {
		any_sub_realm_county = {
			culture = {
				has_cultural_tradition = tradition_vulgar_calradic
			}
		}
		highest_held_title_tier >= tier_duchy
		culture = {
			has_cultural_tradition = tradition_high_calradic
		}
		any_sub_realm_county = {
			NOR = {
				has_county_modifier = funded_vulgar_festivities
				has_county_modifier = taxed_vulgar_festivities
			}
		}
		NOR = {
			has_character_flag = imp_events_0033_cooldown
			has_character_flag = recent_senate_event
			has_character_modifier = taxed_vulgar_festivities_character
		}
	}
	immediate = {
		save_scope_as = root_scope
		random_sub_realm_county = {
			limit = {
				culture = {
					has_cultural_tradition = tradition_vulgar_calradic
				}
			}
			culture = {
				save_scope_as = imperial_0033_culture
			}
			save_scope_as = imperial_0033_county
		}
		add_character_flag = {
			flag = recent_senate_event
			years = 1
		}
	}
	option = { # Empire cannot afford this
		name = ck_imperial_events.0033.a

		add_legitimacy_effect = { LEGITIMACY = minor_legitimacy_loss }
		add_prestige = minor_prestige_loss
		hidden_effect = {
			add_character_flag = {
				flag = imp_events_0033_cooldown
				years = 3
			}
		}
		every_vassal_or_below = {
			limit = {
				has_trait = ck_royalist
			}
			custom = royalist_approves_of_option
			add_opinion = {
				target = root
				modifier = approval_ck_modifier
			}
		}
		every_vassal_or_below = {
			limit = {
				has_trait = ck_oligarch
			}
			custom = oligarch_approves_of_option
			add_opinion = {
				target = root
				modifier = approval_ck_modifier
			}
		}
		every_vassal_or_below = {
			limit = {
				has_trait = ck_populist
			}
			custom = populist_disapproves_of_option
			add_opinion = {
				target = root
				modifier = disapproval_opinion
			}
		}
	}
	option = { # Vulgars are the backbone
		name = ck_imperial_events.0033.b
		add_legitimacy_effect = { LEGITIMACY = major_legitimacy_gain }
		add_prestige = major_prestige_gain
		remove_short_term_gold = major_gold_value
		every_sub_realm_county = {
			limit = {
				culture = {
					this = scope:imperial_0033_culture
				}
			}
			add_county_modifier = {
				modifier = funded_vulgar_festivities
				years = 3
			}
			holder = {
				add_opinion = {
					target = root
					modifier = grateful_opinion
					opinion = 30
				}
				trigger_event = {
					id = ck_imperial_events.0034
					days = 1
				}
			}
		}
		every_vassal_or_below = {
			limit = {
				has_trait = ck_populist
			}
			custom = populist_approves_of_option
			add_opinion = {
				target = root
				modifier = greatly_pleased_ck
			}
		}
		every_vassal_or_below = {
			limit = {
				has_trait = ck_royalist
			}
			custom = royalist_disapproves_of_option
			add_opinion = {
				target = root
				modifier = disapproval_opinion
			}
		}
		every_vassal_or_below = {
			limit = {
				has_trait = ck_oligarch
			}
			custom = oligarch_disapproves_of_option
			add_opinion = {
				target = root
				modifier = disapproval_opinion
			}
		}
	}
	option = { # Tax em
		name = ck_imperial_events.0033.c

		add_legitimacy_effect = { LEGITIMACY = medium_legitimacy_loss }
		add_prestige = medium_prestige_loss
		add_gold = medium_gold_value
		add_character_modifier = {
			modifier = taxed_vulgar_festivities_character
			years = 3
		}
		every_sub_realm_county = {
			limit = {
				culture = {
					this = scope:imperial_0033_culture
				}
			}
			add_county_modifier = {
				modifier = taxed_vulgar_festivities
				years = 3
			}
			holder = {
				trigger_event = {
					id = ck_imperial_events.0035
					days = 1
				}
				add_opinion = {
					target = root
					modifier = steward_taxed_me_opinion
				}
			}
		}

		every_vassal_or_below = {
			limit = {
				has_trait = ck_populist
			}
			custom = populist_approves_of_option
			add_opinion = {
				target = root
				modifier = greatly_displeased_ck
			}
		}
		every_vassal_or_below = {
			limit = {
				has_trait = ck_oligarch
			}
			custom = oligarch_approves_of_option
			add_opinion = {
				target = root
				modifier = approval_ck_modifier
			}
		}
		every_vassal_or_below = {
			limit = {
				has_trait = ck_royalist
			}
			custom = royalist_approves_of_option
			add_opinion = {
				target = root
				modifier = approval_ck_modifier
			}
		}
	}
}
ck_imperial_events.0034 = { ### Vulgar Festivities - Letter 1
	type = letter_event
	theme = ck_imperial
	opening = {
		desc = feast.1501.opening
	}
	desc = ck_imperial_events.0034.desc
	sender = scope:root_scope

	option = {
		name = ck_imperial_events.0034.a
	}
	option = {
		name = ck_imperial_events.0034.b
		trigger = {
			culture = {
				has_cultural_tradition = tradition_high_calradic
			}
			has_trait = arrogant
		}
	}
}
ck_imperial_events.0035 = { ### Vulgar Festivities - Letter 2
	type = letter_event
	theme = ck_imperial
	opening = {
		desc = feast.1501.opening
	}
	desc = ck_imperial_events.0035.desc
	sender = scope:root_scope

	option = {
		name = ck_imperial_events.0035.a
	}
	option = {
		name = ck_imperial_events.0035.b
		trigger = {
			culture = {
				has_cultural_tradition = tradition_vulgar_calradic
			}
		}
	}
	option = {
		name = ck_imperial_events.0035.c
		trigger = {
			culture = {
				has_cultural_tradition = tradition_high_calradic
			}
			has_trait = arrogant
		}
	}
}