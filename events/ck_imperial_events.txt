namespace = ck_imperial_events

ck_imperial_events.0001 = { # Proclaim self as the Emperor
	type = character_event
	title = ck_imperial_events.0001.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = {
						this = scope:new_title.holder
					}
				}
				desc = ck_imperial_events.0001.desc.a
			}
			triggered_desc = {
				trigger = {
					root = {
						NOT = {
							this = scope:new_title.holder
						}
					}
				}
				desc = ck_imperial_events.0001.desc.b
			}
		}
	}
	theme = realm
	right_portrait = {
		character = scope:new_title.holder
		animation = personality_bold
	}
	override_background = { reference = throne_room_mediterranean }
	
	immediate = {
		play_music_cue = "mx_ck_calradian_war"
	}
	
	option = {
		name = {
			trigger = { 
				root = {
					this = scope:new_title.holder
				}
			}
			text = ck_imperial_events.0001.a.root #I shall restore the Empire to its former glory 
		}
		name = {
			trigger = { 
				root = {
					NOT = {
						this = scope:new_title.holder
					}
					has_trait = claimant_emperor
				}
			}
			text = ck_imperial_events.0001.a.emperors #Another false pretendent I will squash
		}
		name = {
			trigger = { 
				root = {
					NOT = {
						this = scope:new_title.holder
					}
					NOT = {
						has_trait = claimant_emperor
					}
					culture = {
						has_cultural_pillar = heritage_calradian
					}
				}
			}
			text = ck_imperial_events.0001.a.calradians #Dark days are ahead of us
		}
		name = {
			trigger = { 
				root = {
					NOT = {
						this = scope:new_title.holder
					}
					NOT = {
						has_trait = claimant_emperor
					}
					NOT = {
						culture = {
							has_cultural_pillar = heritage_calradian
						}
					}
				}
			}
			text = ck_imperial_events.0001.a.foreigners #The Calradians can't seem to decide who rules over them
		}
	}	
	
}
ck_imperial_events.0002 = { # Accepted demand to change faction WIP - add more descs
	type = letter_event
	opening = {
		desc = {
			first_valid = {
				triggered_desc = {
					trigger = {
						scope:recipient = {
							opinion = {
								target = scope:actor
								value >= 40
							}
						}
					}
					desc = ck_imperial_events.0002.opening.a
				}
				desc = ck_imperial_events.0002.opening
			}
		}
	}
	sender = scope:recipient
	desc = { 
		first_valid = {
			triggered_desc = {
				trigger = {
					root = {
						has_trait = ck_oligarch
					}
				}
				desc = ck_imperial_events.0002.desc.a
			}
			triggered_desc = {
				trigger = {
					root = {
						has_trait = ck_militarist
					}
				}
				desc = ck_imperial_events.0002.desc.b
			}
			triggered_desc = {
				trigger = {
					root = {
						has_trait = ck_royalist
					}
				}
				desc = ck_imperial_events.0002.desc.c
			}
			triggered_desc = {
				trigger = {
					root = {
						has_trait = ck_populist
					}
				}
				desc = ck_imperial_events.0002.desc.d
			}
			desc = ck_imperial_events.0002.desc # Fallback
		}
	}
	option = {
		name = ck_imperial_events.0002.a
	}
}
ck_imperial_events.0003 = { # Rejected demand to change faction WIP - add more descs
	type = letter_event
	opening = {
		desc = {
			first_valid = {
				triggered_desc = {
					trigger = {
						scope:recipient = {
							opinion = {
								target = scope:actor
								value >= 40
							}
						}
					}
					desc = ck_imperial_events.0002.opening.a
				}
				desc = ck_imperial_events.0002.opening
			}
		}
	}
	sender = scope:recipient
	desc = { 
		desc = ck_imperial_events.0003.desc # PLACEHOLDER
	}
	option = {
		name = ck_imperial_events.0003.a
		scope:actor = {
			add_opinion = {
				modifier = refused_my_demand
				years = 2
				target = scope:recipient
			}
		}
	}
}
ck_imperial_events.0004 = { # Liberator event
	type = character_event
	title = ck_imperial_events.0004.t
	desc = ck_imperial_events.0004.desc
	theme = war
	right_portrait = {
		character = scope:attacker
		animation = war_over_win
	}
	override_background = { reference = farmland }
	
	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
		scope:defender.primary_title = {
			save_scope_as = primary_tit
		}
		scope:target.primary_title = {
			save_scope_as = targetdesc
		}
	}
	
	option = {
		name = ck_imperial_events.0004.a
		give_nickname = nick_the_liberator_ck
		add_prestige = 800
		add_legitimacy = 40
	}
}
