namespace = ck_backstory

scripted_effect ck_backstory_imprisoner = {
	root.location.county.holder = {
		save_scope_as = ck_imprisoner
	}
}
ck_backstory.0001 = { #Your family was?
	type = character_event
	title = ck_backstory.0001.t
	desc = ck_backstory.begin
	override_background = { reference = temple_generic }
	theme = default

	right_portrait = {
		character = root
		animation = writing
	}
	immediate = {
		remove_all_backstory_flags = yes
	}
	
	option = { # Option 1
		name = CK_FAMILY_1
		trigger_event = {
			id = ck_backstory.0002
		}
		hidden_effect = {
			add_character_flag = s1.1
		}
		show_as_tooltip = {
			add_character_modifier = {
				modifier = born_into_nobility
				# years = 50
			}
			dynasty = {
				add_dynasty_prestige_level = 1
			}
			add_prestige_level = 1
			add_prestige = 250
		}
	}
	option = { # Option 2
		name = CK_FAMILY_2

		trigger_event = {
			id = ck_backstory.0002
		}
		hidden_effect = {
			add_character_flag = s1.2
		}
		show_as_tooltip = {
			if = {
				limit = {
					culture = {
						NOR = {
							has_cultural_pillar = heritage_nahasi
							has_cultural_pillar = heritage_battanian
						}
					}
				}
				add_character_modifier = {
					modifier = born_into_merchants
					# years = 50
				}
			}
			else_if = {
				limit = {
					culture = {
						has_cultural_pillar = heritage_nahasi
					}
				}
				add_character_modifier = {
					modifier = born_into_warrior_slaves
					# years = 50
				}
			}
			# Healers
			else_if = {
				limit = {
					culture = {
						has_cultural_pillar = heritage_battanian
					}
				}
				add_character_modifier = {
					modifier = born_into_healers
					# years = 50
				}
			}
		}
	}
	option = { # Option 3
		name = CK_FAMILY_3
		trigger_event = {
			id = ck_backstory.0002
		}
		hidden_effect = {
			add_character_flag = s1.3
		}
		show_as_tooltip = {
			if = {
				limit = {
					culture = {
						has_cultural_pillar = heritage_nahasi
					}
				}
				add_character_modifier = {
					modifier = born_into_merchants
					# years = 50
				}
			}
			else_if = {
				limit = {
					culture = {
						NOR = {
							has_cultural_pillar = heritage_battanian
							has_cultural_pillar = heritage_khuzic
							has_cultural_pillar = heritage_nahasi
						}
					}
				}
				add_character_modifier = {
					modifier = born_into_farmers
					# years = 50
				}
			}
			else_if = {
				limit = {
					culture = {
						has_cultural_pillar = heritage_battanian
					}
				}
				add_character_modifier = {
					modifier = born_into_tribes_b
					# years = 50
				}
			}
			else_if = {
				limit = {
					culture = {
						has_cultural_pillar = heritage_khuzic
					}
				}
				add_character_modifier = {
					modifier = born_into_tribes_k
					# years = 50
				}
			}
		}
	}
	option = { # Option 4
		name = CK_FAMILY_4
		trigger_event = {
			id = ck_backstory.0002
		}
		hidden_effect = {
			add_character_flag = s1.4
		}
		show_as_tooltip = {
			# Blacksmiths
			if = {
				limit = {
					culture = {
						NOR = {
							has_cultural_pillar = heritage_nahasi
							has_cultural_pillar = heritage_khuzic
						}
					}
				}
				add_character_modifier = {
					modifier = born_into_blacksmith
					# years = 50
				}
			}
			else_if = {
				limit = {
					culture = {
						OR = {
							has_cultural_pillar = heritage_nahasi
							has_cultural_pillar = heritage_khuzic
						}
					}
				}
				add_character_modifier = {
					modifier = born_into_farmers
					# years = 50
				}
			}
		}
	}
	option = { # Option 5
		name = CK_FAMILY_5
		trigger_event = {
			id = ck_backstory.0002
		}
		hidden_effect = {
			add_character_flag = s1.5
		}
		show_as_tooltip = {
			# Hunters
			if = {
				limit = {
					culture = {
						NOR = {
							has_cultural_pillar = heritage_battanian
							has_cultural_pillar = heritage_nahasi
							has_cultural_pillar = heritage_calradian
							has_cultural_pillar = heritage_khuzic
						}
					}
				}
				add_character_modifier = {
					modifier = born_into_hunters
					# years = 50
				}
			}
			# Nomads
			else_if = {
				limit = {
					culture = {
						has_cultural_pillar = heritage_nahasi
					}
				}
				add_character_modifier = {
					modifier = born_into_nomads
					# years = 50
				}
			}
		}
	}
	option = { # Option 6
		name = CK_FAMILY_6
		trigger_event = {
			id = ck_backstory.0002
		}
		hidden_effect = {
			add_character_flag = s1.6
		}
		show_as_tooltip = {
			# Nomads
			if = {
				limit = {
					culture = {
						has_cultural_pillar = heritage_khuzic
					}
				}
				add_character_modifier = {
					modifier = born_into_nomads
					# years = 50
				}
			}
			# Vagabonds
			else_if = {
				limit = {
					culture = {
						OR = {
							has_cultural_pillar = heritage_sturgic
							has_cultural_pillar = heritage_nahasi
							has_cultural_pillar = heritage_calradian
						}
					}
				}
				add_character_modifier = {
					modifier = born_into_squalor
					# years = 50
				}
			}
			# Mercenaries
			else_if = {
				limit = {
					culture = {
						NOR = {
							has_cultural_pillar = heritage_khuzic
							has_cultural_pillar = heritage_battanian
							has_cultural_pillar = heritage_nahasi
							has_cultural_pillar = heritage_sturgic
							has_cultural_pillar = heritage_calradian
						}
					}
				}
				add_character_modifier = {
					modifier = born_into_mercenaries
					# years = 50
				}
			}
		}
	}
}
ck_backstory.0002 = { #Your childhood was?
	type = character_event
	title = ck_backstory.0002.t
	desc = family_type_ck_backstory
	override_background = { reference = temple_generic }
	theme = default

	left_portrait = {
		character = scope:ck_father
		animation = frontend_center_idle
		### Triggered Animations - Depends on culture + profession
		# Merchants
		triggered_animation = {
			trigger = {
				OR = {
					root = { 
						AND = {
							has_character_flag = s1.2
							culture = {
								NOR = {
									has_cultural_pillar = heritage_battanian
									has_cultural_pillar = heritage_nahasi
								}
							}
						}
					}
					root = { 
						AND = {
							has_character_flag = s1.3
							culture = {
								has_cultural_pillar = heritage_nahasi
							}
						}
					}

				} 
			}
			animation = steward
		}
		# Aserai Warrior Slaves / Mercenaries
		triggered_animation = {
			trigger = { 
				root = { 
					OR = {
						AND = {
							has_character_flag = s1.6
							culture = {
								NOR = {
									has_cultural_pillar = heritage_battanian
									has_cultural_pillar = heritage_nahasi
									has_cultural_pillar = heritage_calradian
									has_cultural_pillar = heritage_khuzic
									has_cultural_pillar = heritage_sturgic
								}
							}
						}
						AND = {
							has_character_flag = s1.2
							culture = {
								has_cultural_pillar = heritage_nahasi
							}
						}
					}
				} 
			}
			animation = marshal
		}
		# Hunters
		triggered_animation = {
			trigger = { 
				root = { 
					AND = {
						has_character_flag = s1.5
						culture = {
							NOR = {
								has_cultural_pillar = heritage_battanian
								has_cultural_pillar = heritage_nahasi
								has_cultural_pillar = heritage_calradian
								has_cultural_pillar = heritage_khuzic
							}
						}
					}
				} 
			}
			animation = bow_idle
		}
		# Battanian Healers
		triggered_animation = {
			trigger = { 
				root = { 
					has_character_flag = s1.2
					culture = {
						has_cultural_pillar = heritage_battanian
					}
				} 
			}
			animation = physician
		}
		# Smiths / Blacksmith
		triggered_animation = {
			trigger = { 
				root = { 
					AND = {
						has_character_flag = s1.4
						culture = {
							NOR = {
								has_cultural_pillar = heritage_khuzic
								has_cultural_pillar = heritage_sturgic
								has_cultural_pillar = heritage_nahasi
								has_cultural_pillar = heritage_calradian
							}
						}
					}
				} 
			}
			animation = blacksmith_animation
		}
		# Battanian Bard
		triggered_animation = {
			trigger = { 
				root = { 
					has_character_flag = s1.6
					culture = {
						has_cultural_pillar = heritage_battanian
					}
				} 
			}
			animation = alto_flute_active
		}
		# Vagabonds
		triggered_animation = {
			trigger = { 
				root = { 
					has_character_flag = s1.6
					culture = {
						OR = {
							has_cultural_pillar = heritage_sturgic
							has_cultural_pillar = heritage_calradian
						}
					}
				} 
			}
			animation = begging
		}
		# Farmers
		triggered_animation = {
			trigger = { 
				root = {
					OR = {
						AND = {
							has_character_flag = s1.3
							culture = {
								OR = {
									has_cultural_pillar = heritage_battanian
									has_cultural_pillar = heritage_khuzic
								}
							}
						}
						AND = {
							has_character_flag = s1.4
							culture = {
								OR = {
									has_cultural_pillar = heritage_nahasi
									has_cultural_pillar = heritage_khuzic
								}
							}
						}
						AND = {
							has_character_flag = s1.5
							culture = {
								NOR = {
									has_cultural_pillar = heritage_battanian
									has_cultural_pillar = heritage_nahasi
									has_cultural_pillar = heritage_calradian
									has_cultural_pillar = heritage_khuzic
								}
							}
						}
						AND = {
							has_character_flag = s1.3
							culture = {
								NOR = {
									has_cultural_pillar = heritage_battanian
									has_cultural_pillar = heritage_nahasi
									has_cultural_pillar = heritage_calradian
									has_cultural_pillar = heritage_khuzic
									has_cultural_pillar = heritage_sturgic
								}
							}
						}
					}
				} 
			}
			animation = throne_room_two_handed_passive_1
		}
		### Triggered Outfits - Depends on culture + profession
		# Lower nobility parents
		
		triggered_outfit = {
			trigger = {
				root = {
					AND = {
					has_character_flag = s1.1 
					culture = {
						has_cultural_pillar = heritage_calradian
					}

					}
				}
			}
			outfit_tags = { calradian_nobility_clothes }
		}
		triggered_outfit = {
			trigger = { 
				root = { 
					AND = {
						has_character_flag = s1.4
						culture = {
							NOR = {
								has_cultural_pillar = heritage_khuzic
								has_cultural_pillar = heritage_sturgic
								has_cultural_pillar = heritage_nahasi
								has_cultural_pillar = heritage_calradian
							}
						}
					}
				} 
			}
			outfit_tags = { western_commoner_outfit }
		}
		triggered_outfit = {
			trigger = {
				root = { 
					AND = {
						has_character_flag = s1.1 
						culture = {
							has_cultural_pillar = heritage_nahasi
						}
					}
				}
			}
			outfit_tags = { mena_nobility_clothes }
		}
		triggered_outfit = {
			trigger = {
				root = { 
					OR = {
						AND = {
							has_character_flag = s1.6
							culture = {
								NOR = {
									has_cultural_pillar = heritage_battanian
									has_cultural_pillar = heritage_nahasi
									has_cultural_pillar = heritage_calradian
									has_cultural_pillar = heritage_khuzic
									has_cultural_pillar = heritage_sturgic
								}
							}
						}
						AND = {
							has_character_flag = s1.1 
							culture = {
								OR = {
									has_cultural_pillar = heritage_sturgic
									has_cultural_pillar = heritage_battanian
								}
								
							}
						}
					}
				}
			}
			outfit_tags = { military_outfit }
		}
		triggered_outfit = {
			trigger = {
				root = { 
					AND = {
						has_character_flag = s1.1 
						culture = {
							has_cultural_pillar = heritage_khuzic
						}
					}
				}
			}
			outfit_tags = { steppe_nobility_clothes }
		}
		triggered_outfit = {
			trigger = {
				root = { 
					AND = {
						has_character_flag = s1.1 
						culture = {
							NOR = {
								has_cultural_pillar = heritage_nahasi
								has_cultural_pillar = heritage_battanian
								has_cultural_pillar = heritage_sturgic
								has_cultural_pillar = heritage_khuzic
								has_cultural_pillar = heritage_calradian
							}
						}
					}
				}
			}
			outfit_tags = { military_outfit }
		}
		## Aserai Warrior Slave
		triggered_outfit = {
			trigger = {
				root = { 
					has_character_flag = s1.2 
					culture = {
						has_cultural_pillar = heritage_nahasi
					}
				}
			}
			outfit_tags = { military_outfit }
		}
		## Commoner Farmer (Sturgian/Empire/Vlandia)
		triggered_outfit = {
			trigger = {
				OR = {
					root = {
						AND = {
							has_character_flag = s1.3 
							culture = {
								has_cultural_pillar = heritage_calradian
							}
						}
					}
					root = { 
						AND = {
							has_character_flag = s1.3 
							culture = {
								has_cultural_pillar = heritage_sturgic
							}
						}
					}
					root = { 
						AND = {
							has_character_flag = s1.3 
							culture = {
								NOR = {
									has_cultural_pillar = heritage_nahasi
									has_cultural_pillar = heritage_battanian
									has_cultural_pillar = heritage_sturgic
									has_cultural_pillar = heritage_khuzic
									has_cultural_pillar = heritage_calradian
								}
							}
						}
					}
				}
			}
			outfit_tags = { farmer_clothes }
		}
		hide_info = yes
	}
	right_portrait = {
		character = scope:ck_mother
		animation = frontend_right_idle
		## Animations ##
		# Hunters
		triggered_animation = {
			trigger = { 
				root = { 
					AND = {
						has_character_flag = s1.5
						culture = {
							NOR = {
								has_cultural_pillar = heritage_battanian
								has_cultural_pillar = heritage_nahasi
								has_cultural_pillar = heritage_calradian
								has_cultural_pillar = heritage_khuzic
							}
						}
					}
				} 
			}
			animation = hunting_horn
		}
		## Portraits ##
		triggered_outfit = {
			trigger = {
				root = { 
					has_character_flag = s1.1 
					culture = {
						has_cultural_pillar = heritage_nahasi
					}
				}
			}
			outfit_tags = { mena_nobility_clothes }
		}
		triggered_outfit = {
			trigger = {
				root = { 
					has_character_flag = s1.5 
					culture = {
						has_cultural_pillar = heritage_nahasi
					}
				}
			}
			outfit_tags = { afr_berber_common }
		}
		triggered_outfit = {
			trigger = {
				root = { 
					has_character_flag = s1.1 
					culture = {
						has_cultural_pillar = heritage_calradian
					}
				}
			}
			outfit_tags = { calradian_nobility_clothes }
		}
		triggered_outfit = {
			trigger = {
				root = { 
					has_character_flag = s1.1 
					culture = {
						OR = {
							has_cultural_pillar = heritage_sturgic
							has_cultural_pillar = heritage_battanian
						}
					}
				}
			}
			outfit_tags = { north_nobility_clothes }
		}
		triggered_outfit = {
			trigger = {
				root = { 
					has_character_flag = s1.1 
					culture = {
						has_cultural_pillar = heritage_khuzic
					}
				}
			}
			outfit_tags = { steppe_nobility_clothes }
		}
		triggered_outfit = {
			trigger = {
				root = { 
					has_character_flag = s1.1 
					culture = {
						NOR = {
							has_cultural_pillar = heritage_nahasi
							has_cultural_pillar = heritage_battanian
							has_cultural_pillar = heritage_sturgic
							has_cultural_pillar = heritage_khuzic
							has_cultural_pillar = heritage_calradian
						}
						
					}
				}
			}
			outfit_tags = { western_low_nobility_cloth }
		}
		triggered_outfit = {
			trigger = {
				OR = {
					root = {
						AND = {
							has_character_flag = s1.3
							culture = {
								has_cultural_pillar = heritage_calradian
							}
						}
					}
					root = { 
						AND = {
							has_character_flag = s1.3
							culture = {
								has_cultural_pillar = heritage_sturgic
							}
						}
					}
					root = { 
						AND = {
							has_character_flag = s1.3
							culture = {
								NOR = {
									has_cultural_pillar = heritage_nahasi
									has_cultural_pillar = heritage_battanian
									has_cultural_pillar = heritage_sturgic
									has_cultural_pillar = heritage_khuzic
									has_cultural_pillar = heritage_calradian
								}
							}
						}
					}
				}
			}
			outfit_tags = { farmer_clothes }
		}
		hide_info = yes
	}
	immediate = {
		if = {
			limit = { is_ai = no }
			hidden_effect = {
				create_character = {
					template = backstory_father
					culture = root.culture
					location = root.location
					dynasty_house = root.house
					faith = root.faith
					save_scope_as = ck_father
					age = {
						value = root.age
						add = 21
					}
					after_creation = {
						# add_character_flag = no_headgear
					}
				}
				create_character = {
					template = backstory_mother
					culture = root.culture
					faith = root.faith
					location = root.location
					prowess = 16
					age = {
						value = root.age
						add = 19
					}
					save_scope_as = ck_mother
					after_creation = {
						# add_character_flag = no_headgear
					}
				}
			}
		}
	}
	option = {
		name = CK_CHILD_1
		trigger_event = {
			id = ck_backstory.0003
		}
		hidden_effect = {
			add_character_flag = s2.1
		}
		show_as_tooltip = {
			add_martial_skill = 4
			add_diplomacy_skill = 3
		}
		custom_tooltip = random_commander_trait_tt
	}
	option = {
		name = CK_CHILD_2
		trigger_event = {
			id = ck_backstory.0003
		}
		hidden_effect = {
			add_character_flag = s2.2
		}
		show_as_tooltip = {
			add_prowess_skill = 6
			add_martial_skill = 2
		}
		custom_tooltip = random_prowess_trait_tt
	}
	option = {
		name = CK_CHILD_3
		trigger_event = {
			id = ck_backstory.0003
		}
		hidden_effect = {
			add_character_flag = s2.3
		}
		show_as_tooltip = {
			add_learning_skill = 2
			add_intrigue_skill = 2
			random_diligent_traits = yes
		}
	}
	
	option = {
		name = CK_CHILD_4
		trigger_event = {
			id = ck_backstory.0003
		}
		hidden_effect = {
			add_character_flag = s2.4
		}
		show_as_tooltip = {
			add_learning_skill = 4
			add_stewardship_skill = 4
			if = {
				limit = {
					NOT = {
						has_trait = logistician
					}
				}
				add_trait = logistician
			}
			random_numbers_traits = yes
		}
	}
	option = {
		name = CK_CHILD_5
		trigger_event = {
			id = ck_backstory.0003
		}
		hidden_effect = {
			add_character_flag = s2.5
		}
		show_as_tooltip = {
			add_diplomacy_skill = 5
			add_intrigue_skill = 3
			if = {
				limit = {
					NOR = {
						has_trait = gregarious
						number_of_personality_traits >= 4
					}
				}
				add_trait_force_tooltip = gregarious
			}
			if = {
				limit = {
					AND = {
						has_trait = shy
						NOT = {
							number_of_personality_traits >= 4
						}
					}
				}
				remove_trait_force_tooltip = shy
			}
		}
	}
	option = {
		name = CK_CHILD_6
		trigger_event = {
			id = ck_backstory.0003
		}
		hidden_effect = {
			add_character_flag = s2.6
		}
		show_as_tooltip = {
			add_martial_skill = 2
			add_stewardship_skill = 3
			if = {
				limit = {
					NOT = {
						has_trait = tourney_participant
					}
				}
				add_trait = tourney_participant
				add_trait_xp = {
					trait = tourney_participant
					track = horse
					value = 65
				}
			}
		}
	}
}
ck_backstory.0003 = { #Your young adulthood?? Teenager?? I forgor how it was in m&b
	type = character_event
	title = ck_backstory.0003.t
	desc = child_ck_backstory_desc
	override_background = { reference = temple_generic }
	theme = default

	right_portrait = {
		character = scope:ck_player_infant
		animation = idle
		## Animations ##
		# Leadership
		triggered_animation = {
			trigger = { 
				root = { 
					has_character_flag = s2.1
				}
			}
			animation = personality_bold
		}
		# Brawn
		triggered_animation = {
			trigger = { 
				root = { 
					has_character_flag = s2.2
				}
			}
			animation = hero_flex
		}
		# Attention to Detail
		triggered_animation = {
			trigger = { 
				root = { 
					has_character_flag = s2.3
				}
			}
			animation = reading
		}
		# Aptitude for Numbers
		triggered_animation = {
			trigger = { 
				root = { 
					has_character_flag = s2.4
				}
			}
			animation = page_flipping
		}
		# Way with people
		triggered_animation = {
			trigger = { 
				root = { 
					has_character_flag = s2.5
				}
			}
			animation = flirtation_left
		}
		# Skill w/ Horses
		triggered_animation = {
			trigger = { 
				root = { 
					has_character_flag = s2.6
				}
			}
			animation = child_hobby_horse
		}
		hide_info = yes
	}
	immediate = {
		if = {
			limit = { is_ai = no }
			hidden_effect = {
				create_character = {
					template = ck_doppelganger_infant_template
					location = root.location
					culture = root.culture
					faith = root.faith
					save_scope_as = ck_player_infant
					after_creation = {
						add_character_flag = no_headgear
						add_character_flag = no_beard
					}
				}
			}
		}
	}
	option = {
		name = CK_TEEN_A
		trigger_event = {
			id = ck_backstory.0004
		}
		hidden_effect = {
			add_character_flag = s3.1
		}
		show_as_tooltip = {
			if = {
				limit = {
					culture = {
						NOR = {
							has_cultural_pillar = heritage_sturgic
							has_cultural_pillar = heritage_battanian
							has_cultural_pillar = heritage_nahasi
							has_cultural_pillar = heritage_khuzic
							has_cultural_pillar = heritage_calradian
						}
					}
				}
				add_character_modifier = {
					modifier = ts_town_watch
					# years = 50
				}
				add_trait = tourney_participant
				add_trait_xp = {
					trait = tourney_participant
					track = bow
					value = 65
				}
			}
			else_if = {
				limit = {
					culture = {
						NOR = {
							this = culture:vlandian
							any_parent_culture_or_above = {
								this = culture:vlandian
							}
						}
					} 
				}
				add_character_modifier = {
					modifier = ts_sheep
					# years = 50
				}
				add_trait = athletic
			}
		}
	}
	option = {
		name = CK_TEEN_B
		trigger_event = {
			id = ck_backstory.0004
		}
		hidden_effect = {
			add_character_flag = s3.2
		}
		show_as_tooltip = {
			if = {
				limit = {
					AND = {
						NOT = { 
							has_character_flag = s1.4
						}
						culture = {
							NOR = {
								this = culture:vlandian
								any_parent_culture_or_above = {
									this = culture:vlandian
								}
							}
						}
					}
				}
				add_character_modifier = {
					modifier = ts_smithy
					# years = 50
				}
			}
			else_if = {
				limit = {
					AND = {
						has_character_flag = s1.4
						culture = {
							NOR = {
								has_cultural_pillar = heritage_nahasi
								has_cultural_pillar = heritage_khuzic
								this = culture:vlandian
								any_parent_culture_or_above = {
									this = culture:vlandian
								}
							}
						}
					}
				}
				add_character_modifier = {
					modifier = ts_smithy_2
					# years = 50
				}
			}
			else_if = {
				limit = {
					culture = {
						NOR = {
							has_cultural_pillar = heritage_sturgic
							has_cultural_pillar = heritage_battanian
							has_cultural_pillar = heritage_nahasi
							has_cultural_pillar = heritage_khuzic
							has_cultural_pillar = heritage_calradian
						}
					}
				}
				add_character_modifier = {
					modifier = ts_alley
					# years = 50
				}
				add_trait = gallowsbait
				add_trait_xp = {
					trait = gallowsbait
					track = thief
					value = 60
				}
			}
		}
	}
	option = {
		name = CK_TEEN_C
		trigger_event = {
			id = ck_backstory.0004
		}
		hidden_effect = {
			add_character_flag = s3.3
		}
		show_as_tooltip = {
			add_character_modifier = {
				modifier = ts_docks
				# years = 50
			}
		}
	}
	option = {
		name = CK_TEEN_D
		trigger_event = {
			id = ck_backstory.0004
		}
		hidden_effect = {
			add_character_flag = s3.4
		}
		show_as_tooltip = {
			add_character_modifier = {
				modifier = ts_market
				# years = 50
			}
		}
	}
	option = {
		name = CK_TEEN_E
		trigger_event = {
			id = ck_backstory.0004
		}
		hidden_effect = {
			add_character_flag = s3.5
		}
		show_as_tooltip = {
			if = {
				limit = {
					culture = {
						NOR = {
							has_cultural_pillar = heritage_sturgic
							has_cultural_pillar = heritage_battanian
							has_cultural_pillar = heritage_nahasi
							has_cultural_pillar = heritage_khuzic
						}
					}
				}
				add_character_modifier = {
					modifier = ts_reading
					# years = 50
				}
			}
			else_if = {
				limit = {
					culture = {
						NOR = {
							this = culture:vlandian
							any_parent_culture_or_above = {
								this = culture:vlandian
							}
							has_cultural_pillar = heritage_calradian
						}
					}
				}
				add_character_modifier = {
					modifier = ts_herbs
					# years = 50
				}
				if = {
					limit = {
						NOT = {
							has_trait = lifestyle_physician
						}
					}
					add_trait = lifestyle_physician
				}
			}
		}
	}
	option = {
		name = CK_TEEN_F
		trigger_event = {
			id = ck_backstory.0004
		}
		hidden_effect = {
			add_character_flag = s3.6
		}
		show_as_tooltip = {
			if = {
				limit = {
					culture = {
						NOR = {
							has_cultural_pillar = heritage_sturgic
							has_cultural_pillar = heritage_battanian
							has_cultural_pillar = heritage_nahasi
							has_cultural_pillar = heritage_khuzic
						}
					}
				}
				add_character_modifier = {
					modifier = ts_stables
					# years = 50
				}
			}
			else_if = {
				limit = {
					culture = {
						NOR = {
							this = culture:vlandian
							any_parent_culture_or_above = {
								this = culture:vlandian
							}
							has_cultural_pillar = heritage_calradian
						}
					}
				}
				add_character_modifier = {
					modifier = ts_small_game
					# years = 50
				}
				if = {
					limit = {
						NOT = {
							has_trait = lifestyle_hunter
						}
					}
					add_trait = lifestyle_hunter
				}
			}
			if = {
				limit = {
					AND = {
						culture = {
							NOR = {
								has_cultural_pillar = heritage_sturgic
								has_cultural_pillar = heritage_battanian
								has_cultural_pillar = heritage_nahasi
								has_cultural_pillar = heritage_khuzic
							}
						}
						NOT = {
							AND = {
								has_trait = tourney_participant
								has_character_flag = s2.6
							}
						}
					}
				}
				add_trait = tourney_participant
				add_trait_xp = {
					trait = tourney_participant
					track = horse
					value = 65
				}
			}
		}
	}
	after = {
		scope:ck_player_infant = { silent_disappearance_effect = yes }
	}
}
ck_backstory.0004 = { # Youth - training
	type = character_event
	title = ck_backstory.0004.t
	desc = ck_growing_up_desc
	override_background = { reference = temple_generic }
	theme = default

	right_portrait = {
		character = scope:ck_player_child
		animation = idle
		triggered_animation = {
			trigger = { 
				root = { 
					AND = {
						OR = {
							has_character_flag = s3.3
							has_character_flag = s3.2
						}
						culture = {
							OR = {
								has_cultural_pillar = heritage_khuzic
								has_cultural_pillar = heritage_sturgic
								has_cultural_pillar = heritage_nahasi
								has_cultural_pillar = heritage_calradian
								has_cultural_pillar = heritage_battanian
							}
						}
					}
				} 
			}
			animation = blacksmith_animation
		}
		triggered_animation = {
			trigger = { 
				root = { 
					AND = {
						has_character_flag = s3.6
						culture = {
							OR = {
								has_cultural_pillar = heritage_khuzic
								has_cultural_pillar = heritage_sturgic
								has_cultural_pillar = heritage_nahasi
								has_cultural_pillar = heritage_battanian
							}
						}
					}
				} 
			}
			animation = hunting_shortbow_aim_arrow_default
		}
		hide_info = yes
	}
	immediate = {
		if = {
			limit = { is_ai = no }
			hidden_effect = {
				create_character = {
					template = ck_doppelganger_child_template
					location = root.location
					culture = root.culture
					faith = root.faith
					save_scope_as = ck_player_child
					after_creation = {
						add_character_flag = no_headgear
						add_character_flag = no_beard
					}
				}
			}
		}
	}
	option = {
		name = CK_YOUTH_1.1
		trigger_event = {
			id = ck_backstory.0005
		}
		hidden_effect = {
			add_character_flag = s4.1
		}
		show_as_tooltip = {
			if = {
				limit = {
					NOR = {
						has_trait = open_terrain_expert
						culture = {
							OR = {
								has_cultural_pillar = heritage_sturgic
								has_cultural_pillar = heritage_battanian
							}
						}
					}
				}
				add_trait = open_terrain_expert
			}
			if = {
				limit = {
					NOR = {
						has_character_flag = s2.6
						AND = {
							culture = {
								NOR = {
									has_cultural_pillar = heritage_sturgic
									has_cultural_pillar = heritage_battanian
									has_cultural_pillar = heritage_nahasi
									has_cultural_pillar = heritage_khuzic
								}
							}
							has_character_flag = s3.6
						}
						culture = {
							OR = {
								has_cultural_pillar = heritage_sturgic
								has_cultural_pillar = heritage_battanian
							}
						}
					}
				}
				add_trait = tourney_participant
				add_trait_xp = {
					trait = tourney_participant
					track = horse
					value = 65
				}
				add_martial_skill = 1
			}
			else_if = {
				limit = {
					AND = {
						culture = {
							NOR = {
								has_cultural_pillar = heritage_calradian
								has_cultural_pillar = heritage_nahasi
								this = culture:vlandian
								any_parent_culture_or_above = {
									this = culture:vlandian
								}
								has_cultural_pillar = heritage_khuzic
							}
						} 
						NOT = {
							has_trait = unyielding_defender
						}
					}
				}
				add_trait = unyielding_defender
				add_martial_skill = 1
			}
		}
	}
	option = {
		name = CK_YOUTH_2
		trigger_event = {
			id = ck_backstory.0005
		}
		hidden_effect = {
			add_character_flag = s4.2
		}
		show_as_tooltip = {
			if = {
				limit = {
					NOR = {
						AND = {
							has_character_flag = s3.1
							culture = {
								NOR = {
									has_cultural_pillar = heritage_sturgic
									has_cultural_pillar = heritage_battanian
									has_cultural_pillar = heritage_nahasi
									has_cultural_pillar = heritage_khuzic
									has_cultural_pillar = heritage_calradian
								}
							}
						}
						has_trait = tourney_participant
					}
				}
				add_trait = tourney_participant
				add_trait_xp = {
					trait = tourney_participant
					track = bow
					value = 65
				}
				add_martial_skill = 1
			}
			else_if = {
				limit = {
					NOT = {
						has_trait = unyielding_defender
					}
				}
				add_trait = unyielding_defender
				add_martial_skill = 1
			}
		}
	}
	option = {
		name = CK_YOUTH_3
		trigger_event = {
			id = ck_backstory.0005
		}
		hidden_effect = {
			add_character_flag = s4.3
		}
		show_as_tooltip = {
			add_character_modifier = {
				modifier = training_scouts
				# years = 50
			}
			if = {
				limit = {
					NOT = {
						has_trait = organizer
					}
				}
				add_trait = organizer
			}
		}
	}
	option = {
		name = CK_YOUTH_4
		trigger_event = {
			id = ck_backstory.0005
		}
		hidden_effect = {
			add_character_flag = s4.4
		}
		show_as_tooltip = {
			add_character_modifier = {
				modifier = training_infantry
				# years = 50
			}
			if = {
				limit = {
					NOT = {
						has_trait = flexible_leader
					}
				}
				add_trait = flexible_leader
			}
		}
	}
	option = {
		name = CK_YOUTH_5.1
		trigger_event = {
			id = ck_backstory.0005
		}
		hidden_effect = {
			add_character_flag = s4.5
		}
		show_as_tooltip = {
			add_character_modifier = {
				modifier = training_skirmishers
				# years = 50
			}
			if = {
				limit = {
					NOR = {
						has_trait = cautious_leader
						culture = {
							OR = {
								has_cultural_pillar = heritage_battanian
								has_cultural_pillar = heritage_sturgic
							}
						}
					}
				}
				add_trait = cautious_leader
			}
			else_if = {
				limit = {
					AND = {
						culture = {
								OR = {
									has_cultural_pillar = heritage_battanian
									has_cultural_pillar = heritage_sturgic
								}
							}
						NOT = {
							has_trait = forest_fighter
						}
					}
				}
				add_trait = forest_fighter
			}
		}
	}
	option = {
		name = CK_YOUTH_6
		trigger_event = {
			id = ck_backstory.0005
		}
		hidden_effect = {
			add_character_flag = s4.6
		}
		show_as_tooltip = {
			add_character_modifier = {
				modifier = training_marched
			}
			if = {
				limit = {
					NOT = {
						has_trait = forder
					}
				}
				add_trait = forder
			}
			if = {
				limit = {
					NOT = {
						AND = {
							has_character_flag = s2.4
							has_trait = logistician
						}
					}
				}
				add_trait = logistician
			}
		}
	}
	after = {
		scope:ck_player_child = { silent_disappearance_effect = yes }
	}
}
ck_backstory.0005 = { # Later youth - adventure
	type = character_event
	title = ck_backstory.0005.t
	desc = ck_youth_desc
	override_background = { reference = temple_generic }
	theme = default

	right_portrait = {
		character = scope:ck_player_teen
		animation = marshal
		triggered_outfit = {
			outfit_tags = { military_outfit }
		}
		# Battanian Kern
		triggered_animation = {
			trigger = { 
				root = { 
					AND = {
						has_character_flag = s4.5
						culture = {
							has_cultural_pillar = heritage_battanian
						}
					}
				} 
			}
			animation = marshal
		}
		# Archers
		triggered_animation = {
			trigger = { 
				root = {
					OR = {
						has_character_flag = s4.2
						AND = {
							has_character_flag = s4.5
							NOT = {
								culture = {
									has_cultural_pillar = heritage_battanian
								}
							}
						}
						
					}
				} 
			}
			animation = hunting_shortbow_rest_arrow_default
		}
		hide_info = yes
	}
	immediate = {
		if = {
			limit = { is_ai = no }
			hidden_effect = {
				if = {
					limit = {
						NOT = {
							exists = scope:ck_player_teen
						}
					}
					create_character = {
						template = ck_doppelganger_teen_template
						location = root.location
						culture = root.culture
						faith = root.faith
						save_scope_as = ck_player_teen
						after_creation = {
							add_character_flag = no_headgear
							add_character_flag = no_beard
						}
					}
				}
				if = {
					limit = {
						OR = {
							scope:ck_victim = {
								is_alive = no
							}
							NOT = {
								exists = scope:ck_victim
							}
						}
					}
					create_character = {
						gender_female_chance = 0
						location = root.location
						template = new_warrior_character
						faith = root.faith
						culture = root.culture
						save_scope_as = ck_victim
					}
				}
				if = {
					limit = {
						OR = {
							NOT = {
								exists = scope:ck_prisoner
							}
							scope:ck_prisoner = {
								is_alive = no
							}
						}
					}
					create_character = {
						gender_female_chance = 0
						location = root.location
						template = new_warrior_character
						faith = root.location.faith
						culture = root.location.culture
						save_scope_as = ck_prisoner
					}
				}
			}
		}
	}

	option = {
		name = CK_ACH_1
		trigger_event = {
			id = ck_backstory.0006
		}
		hidden_effect = {
			add_character_flag = s5.1
			scope:ck_prisoner = { silent_disappearance_effect = yes }
		}
		show_as_tooltip = {
			custom_tooltip = {
				text = ck_backstory_kill_enemy
				scope:ck_victim = {
					death = {
						death_reason = death_battle
						killer = root
					}
				}
			}
			add_prestige = 200
		}
	}
	option = {
		name = CK_ACH_CHOICE_2_desc
		trigger_event = {
			id = ck_backstory.0006
		}
		hidden_effect = {
			add_character_flag = s5.2
			scope:ck_victim = { silent_disappearance_effect = yes }
		}
		show_as_tooltip = {
			if = {
				limit = {
					culture = {
						NOR = {
							has_cultural_pillar = heritage_battanian
							has_cultural_pillar = heritage_sturgic
							has_cultural_pillar = heritage_khuzic
							has_cultural_pillar = heritage_nahasi
							has_cultural_pillar = heritage_calradian
						}
					} 
				}
				root.location.county.holder = {
					imprison = {
						target = scope:ck_prisoner
						type = dungeon
					}
					add_opinion = {
						target = root
						modifier = ck_caught_thief
					}
				}
			}
			else_if = {
				limit = {
					culture = {
						has_cultural_pillar = heritage_calradian
					}
				}
				add_character_modifier = {
					modifier = travel_local_hero_modifier
				}
				add_prestige = 100
			}
			else = {
				add_prestige = 300
			}
		}
	}
	option = {
		name = CK_ACH_CHOICE_3_desc
		trigger_event = {
			id = ck_backstory.0006
		}
		hidden_effect = {
			add_character_flag = s5.3
			scope:ck_prisoner = { silent_disappearance_effect = yes }
			scope:ck_victim = { silent_disappearance_effect = yes }
		}
		show_as_tooltip = {
			add_gold = 50
		}
	}
	option = {
		name = CK_ACH_CHOICE_4_desc
		trigger_event = {
			id = ck_backstory.0006
		}
		hidden_effect = {
			add_character_flag = s5.4
			scope:ck_prisoner = { silent_disappearance_effect = yes }
			scope:ck_victim = { silent_disappearance_effect = yes }
		}
		show_as_tooltip = {
			if = {
				limit = {
					culture = {
						OR = {
							has_cultural_pillar = heritage_battanian
							has_cultural_pillar = heritage_sturgic
							has_cultural_pillar = heritage_khuzic
							has_cultural_pillar = heritage_nahasi
						}
					}
				}
				add_character_modifier = {
					modifier = modifier_hunt_hunting_trophy
				}
			}
			else = {
				add_prestige = 250
			}
		}
	}
	option = {
		name = CK_ACH_5
		trigger_event = {
			id = ck_backstory.0006
		}
		show_as_tooltip = {
			add_trait = lifestyle_reveler
			add_piety = -15
		}
		hidden_effect = {
			add_character_flag = s5.5
			scope:ck_prisoner = { silent_disappearance_effect = yes }
			scope:ck_victim = { silent_disappearance_effect = yes }
		}
	}
	option = {
		name = CK_ACH_6
		trigger_event = {
			id = ck_backstory.0006
		}
		hidden_effect = {
			add_character_flag = s5.6
			scope:ck_prisoner = { silent_disappearance_effect = yes }
			scope:ck_victim = { silent_disappearance_effect = yes }
		}
		trigger = {
			NOT = {
				has_trait = callous
			}
		}
		show_as_unavailable = {
			has_trait = callous
		}
		show_as_tooltip = {
			add_character_modifier = {
				modifier = kindness_ck
			}
		}
	}
	after = {
		scope:ck_player_teen = { silent_disappearance_effect = yes }
	}
}
ck_backstory.0006 = { #Reason for adventuring
	type = character_event
	title = ck_backstory.0006.t
	desc = ck_adventure_desc
	
	override_background = { reference = temple_generic }
	theme = default

	left_portrait = {
		character = scope:ck_player_young
		animation = idle
		triggered_animation = {
			trigger = { 
				root = { 
					has_character_flag = s5.3
				} 
			}
			animation = steward
		}
		triggered_animation = {
			trigger = { 
				root = { 
					AND = {
						has_character_flag = s5.4
						culture = {
							OR = {
								has_cultural_pillar = heritage_khuzic
								has_cultural_pillar = heritage_sturgic
								has_cultural_pillar = heritage_nahasi
								has_cultural_pillar = heritage_calradian
								has_cultural_pillar = heritage_battanian
							}
						}
					}
				} 
			}
			animation = hunting_shortbow_aim_arrow_default
		}
		triggered_animation = {
			trigger = { 
				root = { 
					has_character_flag = s5.5
				} 
			}
			animation = flirtation_left
		}
		hide_info = yes
	}
	immediate = {
		if = {
			limit = { is_ai = no }
			hidden_effect = {
				create_character = {
					template = ck_doppelganger_young_template
					location = root.location
					culture = root.culture
					faith = root.faith
					save_scope_as = ck_player_young
					after_creation = {
						add_character_flag = no_headgear
						add_character_flag = no_beard
					}
				}
			}
		}
	}

	option = {
		name = FINISH_CK
		trigger_event = {
			id = ck_backstory.0007
		}
	}
	after = {
		scope:ck_player_young = { silent_disappearance_effect = yes }
	}
}
ck_backstory.0007 = { # Synopsis
	type = character_event
	title = ck_backstory.0007.t
	desc = ck_summary_story_desc
	
	override_background = { reference = temple_generic }
	theme = default

	right_portrait = {
		character = root
		animation = thinking
	}
	option = {
		name = FINISH_CK_DONE
		if = {
			limit = {
				is_landless_adventurer = yes
				trigger_event = {
					id = ep3_laamps.1001
				}
			}
		}
		hidden_effect = {
			create_character_memory = {
				type = ck_backstory_memory_fam
			}
			create_character_memory = {
				type = ck_backstory_memory_kid
			}
			create_character_memory = {
				type = ck_backstory_memory_young
			}
			create_character_memory = {
				type = ck_backstory_memory_ach
			}
			parents_ck_marry = yes
		}
		overall_backstory_effect = yes
		new_mom_and_dad = yes
	}
	option = {
		name = GO_BACK_CK
		trigger_event = {
			id = ck_backstory.0001
		}
		custom_tooltip = {
			text = family_type_gg
		}
		hidden_effect = {
			#This also deserves a memory
			remove_all_backstory_flags = yes
			scope:ck_mother = { silent_disappearance_effect = yes }
			scope:ck_father = { silent_disappearance_effect = yes }
			scope:ck_prisoner = { silent_disappearance_effect = yes }
			scope:ck_victim = { silent_disappearance_effect = yes }
		}
	}
}